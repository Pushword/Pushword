
<div id="draftWrapper" class="form-group" style="margin-top:10px">
<label for="draft" style="font-weight:400">
<input type="checkbox" id="draft" class="minimal" {{ draft ? 'checked' : '' }}>
<i>Brouillon</i></label>
</div>
<script>
document.addEventListener('DOMContentLoaded', function() {
    $("#draft").on("ifChanged", toggleDraft); // can't drop jquery because of iCheck
});

function toggleDraft() {
    console.log('toggleDraft');
    const inputDate = document.querySelector('[data-selector="publishedAtToDraft"]');
    let currentDate = new Date(inputDate.value);
    console.log(currentDate);

    const draft = document.getElementById('draft');
    if (draft.checked) {
        currentDate.setFullYear(currentDate.getFullYear() + 10);
    } else {
        currentDate = new Date();
    }

    const formattedDate = currentDate.toISOString().slice(0, 16).replace('T', ' ');
    inputDate.value = formattedDate;
}
</script>
