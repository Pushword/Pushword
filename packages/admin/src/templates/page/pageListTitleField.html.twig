{# @var page \Pushword\Core\Entity\Page #}
{% set page = entity.instance %}

{% set inlineTarget = 'pw-page-inline-' ~ page.id %}
{% set inlineAction = url('pushword_page_inline_update', {id: page.id}) %}
{% set inlineToken = csrf_token('page_inline_' ~ page.id) %}

{% set editUrl = ea_url()
    .setAction('edit')
    .setEntityId(page.id)
%}

<div id="{{ inlineTarget }}" class="pw-page-inline d-flex flex-column">
  <div class="d-flex flex-row align-items-center">

    <div style="flex: 1;">
      {% if page.isPublished == 0 %}
        <span class="badge badge-info" title="{{ page.publishedAt ? page.publishedAt|format_datetime : 'adminDraft'|trans }}">{{ (page.publishedAt ? 'admin.planified' : 'adminDraft')|trans }}</span>
      {% elseif page.metaRobots != '' %}
        <span class="badge" title="{{ page.metaRobots }}"><i class="fa fa-eye-slash"></i></span>
      {% endif %}


      <a
        href="{{ page(page ) }}" target="_blank"
        class="me-2 align-items-center"
        style="text-decoration: none; color:#333; font-weight:400; font-size:90%">
        <i class="fa fa-external-link me-1" style="opacity:0.5;"></i>
        {{ page.host ? page.host ~ ' â€º ' : '' }}{{ page.slug }}</a>
      <br>
      <a
        href="{{ editUrl }}"
        class="py-2"
        style="display: inline-block; text-decoration: none; font-size:110%;font-weight:600">
        {{ page.h1 is empty ? page.title : page.h1|striptags }}
      </a>
    </div>

  </div>

  <div class="d-flex flex-wrap align-items-center text-muted small pw-inline-tags-wrapper">
    <span style="font-weight:200; color:#94a3b8;">#</span>
    <input
      type="text"
      class="grow px-1 pw-inline-tags-input"
      style="min-width: 50px; border: none; background: transparent; outline: none; font-size: inherit; color: inherit;"
      value="{{ page.tags|default('')|trim }}"
      placeholder="{{ 'adminPageTagsPlaceholder'|trans }}"
      hx-post="{{ inlineAction }}"
      hx-trigger="blur changed"
      hx-target="#{{ inlineTarget }}"
      hx-swap="outerHTML"
      hx-vals='js:{field: "tags", value: event.target.value.trim(), _token: "{{ inlineToken|e('js') }}"}'
      data-tags="{{ pw_all_tags_json(page.host) }}"
    >
    <div class="textSuggester" style="display:none;"></div>
  </div>
</div>
