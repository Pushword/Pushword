{#
  @var Media|string|null  image
  @var Page|null          page
  @var string             filter
  @var array              otherAttributes
#}
{% macro thumb(
  image,
  page = null,
  filter = 'thumb',
  otherAttributes = {}
) %}
{% set image = isInstanceOfMedia(image) ? image : media_from_string(image) %}
{% set modern_format = preferred_modern_format(filter) %}
<picture>
{% if modern_format %}
  <source
    type="image/{{ modern_format }}"
    srcset="{{ image|image(filter, modern_format) }} 576w"
    sizes="(max-width: 576px) 100vw, 576px">
{% endif %}
  <img
    srcset="{{ image|image(filter) }} 576w"
    sizes="(max-width: 576px) 100vw, 576px"
    src="{{ image|image('default') }}"
    loading=lazy
    width="{{ filter == 'thumb' ? '1000' : image.width }}"
    height="{{ filter == 'thumb' ? '1000' : image.height }}"
    {% if otherAttributes.alt is not defined or otherAttributes.alt %}
      alt="{{ image.altByLocale(page is not null ? page.locale : '') }}"
    {% endif %}
    {{ otherAttributes ? attr(otherAttributes) : '' }}>
</picture>
{% endmacro %}
