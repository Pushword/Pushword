{% extends '@EasyAdmin/page/content.html.twig' %}

{% block title %}{{ page.slug }} › Versions{% endblock %}

{% block actions %}
    <a class="btn btn-danger" href="{{ path('pushword_version_reset', {id: page.id}) }}">
        <i class="fa fa-trash" aria-hidden="true"></i> Reset
    </a>
{% endblock %}

{% block main %}
<div class="card shadow-sm">
    <div class="card-header">
        <h3 class="card-title mb-0">
            <a href="{{ path('admin_page_edit', {id: page.id}) }}" class="link-primary">{{ page.slug }}</a> › Versions
        </h3>
    </div>
    <div class="card-body p-0">
        <table class="table table-hover mb-0">
            <thead class="table-light">
                <tr>
                    <th scope="col">Titre</th>
                    <th scope="col">Date</th>
                    <th scope="col">Reason</th>
                    <th scope="col" class="text-end">Action</th>
                </tr>
            </thead>
            <tbody>
            {% for version, p in pages %}
                <tr>
                    <td>
                        <a class="link-primary" href="{{ path('pushword_version_load', {id: page.id, version: version}) }}">
                            {{ p.h1|default(p.title) }}
                        </a>
                    </td>
                    <td class="text-muted">
                        {{ p.updatedAt|date }}{{ p.editedBy ? ' (<small>' ~ p.editedBy.username ~ '</small>)' : '' }}
                    </td>
                    <td class="text-muted">
                        {{ p.editMessage }}
                    </td>
                    <td class="text-end">
                        <a href="{{ path('pushword_version_load', {id: page.id, version: version}) }}" class="btn btn-outline-secondary btn-sm px-2">
                            <i class="fa fa-edit me-2" aria-hidden="true"></i> Switch
                        </a>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="4" class="text-center text-muted py-4">Aucune version disponible.</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
