{% extends '@EasyAdmin/page/content.html.twig' %}

{% block title %}{{ page.slug }} › {{ 'versionVersions'|trans }}{% endblock %}

{% block actions %}
    <a class="btn btn-danger" href="{{ path('admin_version_reset', {id: page.id}) }}">
        <i class="fa fa-trash" aria-hidden="true"></i> {{ 'versionReset'|trans }}
    </a>
{% endblock %}

{% block content_title %}
  <div style="line-height: 1;">
    {{ 'versionVersions'|trans }}<br>
    <span style="font-size:14px"> › <a href="{{ path('admin_page_edit', {id: page.id}) }}" class="link-primary ">{{ page.slug }}</a></span>
  </div>
{% endblock %}

{% block main %}
<div class="card shadow-sm">
    <div class="card-body p-0">
        <table class="table table-hover mb-0">
            <thead class="table-light">
                <tr>
                    <th scope="col">{{ 'versionTitle'|trans }}</th>
                    <th scope="col">{{ 'versionDate'|trans }}</th>
                    <th scope="col">{{ 'versionReason'|trans }}</th>
                    <th scope="col" class="text-end">{{ 'versionAction'|trans }}</th>
                </tr>
            </thead>
            <tbody>
            {% for version, p in pages|reverse(true) %}
                <tr>
                    <td>
                        <a class="link-primary" href="{{ path('admin_version_compare', {id: page.id, versionLeft: version, versionRight: 'current'}) }}">
                            {{ p.h1|default(p.title) }}
                        </a>
                    </td>
                    <td class="text-muted">
                        {{ p.updatedAt|date }}{{ p.editedBy ? ' (<small>' ~ p.editedBy.username ~ '</small>)' : '' }}
                    </td>
                    <td class="text-muted">
                        {{ p.editMessage }}
                    </td>
                    <td class="text-end">
                        <a href="{{ path('admin_version_compare', {id: page.id, versionLeft: version, versionRight: 'current'}) }}" class="btn btn-outline-primary btn-sm px-2 me-1" title="{{ 'versionCompare'|trans }}">
                            <i class="fa fa-code-compare" aria-hidden="true"></i> {{ 'versionCompare'|trans }}
                        </a>
                        <a href="{{ path('admin_version_load', {id: page.id, version: version}) }}" class="btn btn-outline-secondary btn-sm px-2">
                            <i class="fa fa-edit me-2" aria-hidden="true"></i> {{ 'versionSwitch'|trans }}
                        </a>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="4" class="text-center text-muted py-4">{{ 'versionNoVersion'|trans }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
