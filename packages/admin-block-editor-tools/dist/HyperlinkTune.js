!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(self,(()=>(()=>{"use strict";var e={462:(e,t,n)=>{n.d(t,{A:()=>u});var o=n(4848),i=n(959);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,c(o.key),o)}}function c(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"element",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=document.createElement(e);for(var a in Array.isArray(n)?(t=r.classList).add.apply(t,s(n)):n&&r.classList.add(n),o)r.setAttribute(a,o[a]);return""!==i&&(r.innerHTML=i),r}},{key:"input",value:function(t,n,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=e.element("div",n,{contentEditable:!t.readOnly});return r.dataset.placeholder=t.api.i18n.t(o),i&&(r.textContent=i),r}},{key:"option",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=document.createElement("option");for(var r in i.text=n||t,i.value=t,o)i.setAttribute(r,o[r]);e.add(i)}},{key:"options",value:function(t,n){n.forEach((function(n){return e.option(t,n)}))}},{key:"fileButtons",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e.element("div",["flex","cdx-input-labeled-preview","cdx-input-labeled","cdx-input","cdx-input-editable"].concat(s(n))),a=e.element("div",[t.api.styles.button]);if(a.innerHTML=o.A+" "+t.api.i18n.t("Select"),a.addEventListener("click",(function(e){return t.onSelectFile(t,e)})),r.appendChild(a),t.onUploadFile){var l=e.element("div",[t.api.styles.button]);l.innerHTML="".concat(i.A," ").concat(t.api.i18n.t("Upload")),l.style.marginLeft="-2px",l.addEventListener("click",(function(e){return t.onUploadFile(t,e)})),r.appendChild(l)}return r}},{key:"switchInput",value:function(t,n){var o=e.element("div","editor-switch"),i=e.element("input",null,{type:"checkbox",id:t}),r=e.element("label","label-default",{for:t}),s=e.element("label","",{for:t});return s.innerHTML=n,o.append(i,r,s),o}},{key:"selectionCollapseToEnd",value:function(){var e=window.getSelection(),t=document.createRange();t.selectNodeContents(e.focusNode),t.collapse(!1),e.removeAllRanges(),e.addRange(t)}}],(n=null)&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}()},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},959:(e,t,n)=>{n.d(t,{A:()=>o});const o='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">  <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>  <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/></svg>\n'},1113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},1601:e=>{e.exports=function(e){return e[1]}},4848:(e,t,n)=>{n.d(t,{A:()=>o});const o='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">  <path d="M1 3.5A1.5 1.5 0 0 1 2.5 2h2.764c.958 0 1.76.56 2.311 1.184C7.985 3.648 8.48 4 9 4h4.5A1.5 1.5 0 0 1 15 5.5v.64c.57.265.94.876.856 1.546l-.64 5.124A2.5 2.5 0 0 1 12.733 15H3.266a2.5 2.5 0 0 1-2.481-2.19l-.64-5.124A1.5 1.5 0 0 1 1 6.14V3.5zM2 6h12v-.5a.5.5 0 0 0-.5-.5H9c-.964 0-1.71-.629-2.174-1.154C6.374 3.334 5.82 3 5.264 3H2.5a.5.5 0 0 0-.5.5V6zm-.367 1a.5.5 0 0 0-.496.562l.64 5.124A1.5 1.5 0 0 0 3.266 14h9.468a1.5 1.5 0 0 0 1.489-1.314l.64-5.124A.5.5 0 0 0 14.367 7H1.633z"/></svg>\n'},5056:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},5072:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var r={},s=[],a=0;a<e.length;a++){var l=e[a],c=o.base?l[0]+o.base:l[0],u=r[c]||0,d="".concat(c," ").concat(u);r[c]=u+1;var h=n(d),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var f=i(p,o);o.byIndex=a,t.splice(a,0,{identifier:d,updater:f,references:1})}s.push(d)}return s}function i(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var r=o(e=e||[],i=i||{});return function(e){e=e||[];for(var s=0;s<r.length;s++){var a=n(r[s]);t[a].references--}for(var l=o(e,i),c=0;c<r.length;c++){var u=n(r[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}r=l}}},5678:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(1601),i=n.n(o),r=n(6314),s=n.n(r)()(i());s.push([e.id,".cdx-input-full {\n    width: 100%;\n}\n",""]);const a=s},6314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,i,r){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(o)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);o&&s[u[0]]||(void 0!==r&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=r),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},7659:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},7825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,i&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},8945:(e,t,n)=>{n.d(t,{default:()=>ni});var o=n(5072),i=n.n(o),r=n(7825),s=n.n(r),a=n(7659),l=n.n(a),c=n(5056),u=n.n(c),d=n(540),h=n.n(d),p=n(1113),f=n.n(p),g=n(9110),v={};v.styleTagTransform=f(),v.setAttributes=u(),v.insert=l().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=h();i()(g.A,v);g.A&&g.A.locals&&g.A.locals;class m{instance=null;selection=null;savedSelectionRange=null;isFakeBackgroundEnabled=!1;commandBackground="backColor";commandRemoveFormat="removeFormat";static get range(){const e=window.getSelection();return e&&e.rangeCount?e.getRangeAt(0):null}static get text(){return window.getSelection?window.getSelection().toString():""}static get(){return window.getSelection()}removeFakeBackground(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}setFakeBackground(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}save(){this.savedSelectionRange=m.range}restore(){if(!this.savedSelectionRange)return;const e=window.getSelection();e.removeAllRanges(),e.addRange(this.savedSelectionRange)}clearSaved(){this.savedSelectionRange=null}collapseToEnd(){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(e.focusNode),t.collapse(!1),e.removeAllRanges(),e.addRange(t)}findParentTag(e,t,n=10){const o=window.getSelection();let i=null;if(!o||!o.anchorNode||!o.focusNode)return null;return[o.anchorNode,o.focusNode].forEach((o=>{let r=n;for(;r>0&&o.parentNode&&(o.tagName!==e||(i=o,t&&o.classList&&!o.classList.contains(t)&&(i=null),!i));)o=o.parentNode,r--})),i}}var b=n(462);const y='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>';var w={LocalMulti:function(){},Key:{TAB:9,RETURN:13,ESC:27,UP:38,DOWN:40},copyProperties:function(e,t){for(var n in t)e[n]=t[n];return e},Local:function(){this.initialize.apply(this,arguments)}};w.Local.prototype={initialize:function(e,t,n){this.input=this._getElement(e),this.suggestArea=this._getElement(t),this.candidateList=n,this.oldText=this.getInputText(),arguments[3]&&this.setOptions(arguments[3]),this._addEvent(this.input,"focus",this._bind(this.checkLoop)),this._addEvent(this.input,"blur",this._bind(this.inputBlur)),this._addEvent(this.suggestArea,"blur",this._bind(this.inputBlur)),this._addEvent(this.input,"keydown",this._bindEvent(this.keyEvent)),this.clearSuggestArea()},interval:500,dispMax:20,listTagName:"div",prefix:!1,ignoreCase:!0,highlight:!1,dispAllKey:!1,classMouseOver:"over",classSelect:"select",delim:" ",hookBeforeSearch:null,hookSearchResults:null,setOptions:function(e){w.copyProperties(this,e)},inputBlur:function(){setTimeout(this._bind((function(){document.activeElement!=this.suggestArea&&document.activeElement!=this.input&&(this.changeUnactive(),this.oldText=this.getInputText(),this.timerId&&clearTimeout(this.timerId),this.timerId=null,setTimeout(this._bind(this.clearSuggestArea),500))}),500))},checkLoop:function(){var e=this.getInputText();e!=this.oldText&&(this.oldText=e,this.search()),this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout(this._bind(this.checkLoop),this.interval)},search:function(){this.clearSuggestArea();var e=this.getInputText();if(""!=e&&null!=e){this.hookBeforeSearch&&this.hookBeforeSearch(w,e);var t=this._search(e);this.hookSearchResults&&(t=window[this.hookSearchResults](this,this.getInputValue(),e,t)),0!=t.length&&this.createSuggestArea(t)}},_search:function(e){var t,n=[];this.suggestIndexList=[];for(var o=0,i=this.candidateList.length;o<i;o++)if(null!=(t=this.isMatch(this.candidateList[o],e))){if(this.getInputValue().includes(t.replace(/(<([^>]+)>)/gi,"")))continue;if(n.push(t),this.suggestIndexList.push(o),0!=this.dispMax&&n.length>=this.dispMax)break}return n},isMatch:function(e,t){if(null==e)return null;var n=this.ignoreCase?e.toLowerCase().indexOf(t.toLowerCase()):e.indexOf(t);return-1==n||this.prefix&&0!=n?null:this.highlight?this._escapeHTML(e.substr(0,n))+"<strong>"+this._escapeHTML(e.substr(n,t.length))+"</strong>"+this._escapeHTML(e.substr(n+t.length)):this._escapeHTML(e)},clearSuggestArea:function(){this.suggestArea.innerHTML="",this.suggestArea.style.display="none",this.suggestList=null,this.suggestIndexList=null,this.activePosition=null},createSuggestArea:function(e){this.suggestList=[],this.inputValueBackup=this.getInputValue();for(var t=0,n=e.length;t<n;t++){var o=document.createElement(this.listTagName);o.innerHTML=e[t],this.suggestArea.appendChild(o),this._addEvent(o,"click",this._bindEvent(this.listClick,t)),this._addEvent(o,"mouseover",this._bindEvent(this.listMouseOver,t)),this._addEvent(o,"mouseout",this._bindEvent(this.listMouseOut,t)),this.suggestList.push(o)}this.suggestArea.style.display="",this.suggestArea.scrollTop=0},getInputValue:function(){return this.input instanceof HTMLInputElement?this.input.value:this.input.innerText},getInputText:function(){return this.getInputValue()},setInputValue:function(e){this.input instanceof HTMLInputElement?this.input.value=e:this.input.innerText=e},setInputText:function(e){this.setInputValue(e)},keyEvent:function(e){this.timerId||(this.timerId=setTimeout(this._bind(this.checkLoop),this.interval)),this.dispAllKey&&e.ctrlKey&&""==this.getInputText()&&!this.suggestList&&e.keyCode==w.Key.DOWN?(this._stopEvent(e),this.keyEventDispAll()):e.keyCode==w.Key.UP||e.keyCode==w.Key.DOWN?this.suggestList&&0!=this.suggestList.length&&(this._stopEvent(e),this.keyEventMove(e.keyCode)):e.keyCode==w.Key.RETURN?this.suggestList&&0!=this.suggestList.length&&(this._stopEvent(e),this.keyEventReturn()):e.keyCode==w.Key.ESC?this.suggestList&&0!=this.suggestList.length&&(this._stopEvent(e),this.keyEventEsc()):this.keyEventOther(e)},keyEventDispAll:function(){this.clearSuggestArea(),this.oldText=this.getInputText(),this.suggestIndexList=[];for(var e=0,t=this.candidateList.length;e<t;e++)this.suggestIndexList.push(e);this.createSuggestArea(this.candidateList)},keyEventMove:function(e){if(this.changeUnactive(),e==w.Key.UP){if(null==this.activePosition)this.activePosition=this.suggestList.length-1;else if(this.activePosition--,this.activePosition<0)return this.activePosition=null,this.setInputValue(this.inputValueBackup),void(this.suggestArea.scrollTop=0)}else if(null==this.activePosition?this.activePosition=0:this.activePosition++,this.activePosition>=this.suggestList.length)return this.activePosition=null,this.setInputValue(this.inputValueBackup),void(this.suggestArea.scrollTop=0);this.changeActive(this.activePosition)},keyEventReturn:function(){this.clearSuggestArea(),this.moveEnd()},keyEventEsc:function(){this.clearSuggestArea(),this.setInputValue(this.inputValueBackup),this.oldText=this.getInputText(),window.opera&&setTimeout(this._bind(this.moveEnd),5)},keyEventOther:function(e){},changeActive:function(e){this.setStyleActive(this.suggestList[e]),this.setInputText(this.candidateList[this.suggestIndexList[e]]),this.oldText=this.getInputText(),this.input.focus()},changeUnactive:function(){null!=this.suggestList&&this.suggestList.length>0&&null!=this.activePosition&&this.setStyleUnactive(this.suggestList[this.activePosition])},listClick:function(e,t){this.changeUnactive(),this.activePosition=t,this.changeActive(t),this.clearSuggestArea(),this.moveEnd()},listMouseOver:function(e,t){this.setStyleMouseOver(this._getEventElement(e))},listMouseOut:function(e,t){if(this.suggestList){var n=this._getEventElement(e);t==this.activePosition?this.setStyleActive(n):this.setStyleUnactive(n)}},setStyleActive:function(e){e.className=this.classSelect;var t=e.offsetTop,n=t+e.clientHeight;this.suggestArea.scrollTop>t?this.suggestArea.scrollTop=t:this.suggestArea.scrollTop+this.suggestArea.clientHeight<n&&(this.suggestArea.scrollTop=n-this.suggestArea.clientHeight)},setStyleUnactive:function(e){e.className=""},setStyleMouseOver:function(e){e.className=this.classMouseOver},moveEnd:function(){if(this.input.createTextRange)this.input.focus(),(e=this.input.createTextRange()).move("character",this.getInputValue().length),e.select();else if(this.input.setSelectionRange)this.input.setSelectionRange(this.getInputValue().length,this.getInputValue().length);else{var e;this.input.focus(),(e=document.createRange()).selectNodeContents(this.input),e.collapse(!1);var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}},_getElement:function(e){return"string"==typeof e?document.getElementById(e):e},_addEvent:window.addEventListener?function(e,t,n){e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)},_stopEvent:function(e){e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e.returnValue=!1,e.cancelBubble=!0)},_getEventElement:function(e){return e.target||e.srcElement},_bind:function(e){var t=this,n=Array.prototype.slice.call(arguments,1);return function(){e.apply(t,n)}},_bindEvent:function(e){var t=this,n=Array.prototype.slice.call(arguments,1);return function(o){o=o||window.event,e.apply(t,[o].concat(n))}},_escapeHTML:function(e){return e.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")}},w.LocalMulti=function(){this.initialize.apply(this,arguments)},w.copyProperties(w.LocalMulti.prototype,w.Local.prototype),w.LocalMulti.prototype.keyEventReturn=function(){this.clearSuggestArea(),this.setInputValue(this.getInputValue()+this.delim),this.moveEnd()},w.LocalMulti.prototype.keyEventOther=function(e){e.keyCode==w.Key.TAB&&this.suggestList&&0!=this.suggestList.length&&(this._stopEvent(e),this.activePosition||(this.activePosition=0,this.changeActive(this.activePosition)),this.clearSuggestArea(),this.setInputValue(this.getInputValue()+this.delim),window.opera?setTimeout(this._bind(this.moveEnd),5):this.moveEnd())},w.LocalMulti.prototype.listClick=function(e,t){this.changeUnactive(),this.activePosition=t,this.changeActive(t),this.setInputValue(this.getInputValue()+this.delim),this.clearSuggestArea(),this.moveEnd()},w.LocalMulti.prototype.getInputText=function(){var e=this.getLastTokenPos();return-1==e?this.getInputValue():this.getInputValue().substr(e+this.delim.length)},w.LocalMulti.prototype.setInputText=function(e){var t=this.getLastTokenPos();-1==t?this.setInputValue(e):this.setInputValue(this.getInputValue().substr(0,t+this.delim.length)+e)},w.LocalMulti.prototype.getLastTokenPos=function(){return this.getInputValue().lastIndexOf(this.delim)},function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".ce-hint--align-start{text-align:left}.ce-hint--align-center{text-align:center}.ce-hint__description{opacity:.6;margin-top:3px}")),document.head.appendChild(e)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}}();var k=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function C(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function E(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})})),n}function T(){}Object.assign(T,{default:T,register:T,revert:function(){},__esModule:!0}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){const t=(this.document||this.ownerDocument).querySelectorAll(e);let n=t.length;for(;--n>=0&&t.item(n)!==this;);return n>-1}),Element.prototype.closest||(Element.prototype.closest=function(e){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t);return null}),Element.prototype.prepend||(Element.prototype.prepend=function(e){const t=document.createDocumentFragment();Array.isArray(e)||(e=[e]),e.forEach((e=>{const n=e instanceof Node;t.appendChild(n?e:document.createTextNode(e))})),this.insertBefore(t,this.firstChild)}),Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(e){e=0===arguments.length||!!e;const t=this.parentNode,n=window.getComputedStyle(t,null),o=parseInt(n.getPropertyValue("border-top-width")),i=parseInt(n.getPropertyValue("border-left-width")),r=this.offsetTop-t.offsetTop<t.scrollTop,s=this.offsetTop-t.offsetTop+this.clientHeight-o>t.scrollTop+t.clientHeight,a=this.offsetLeft-t.offsetLeft<t.scrollLeft,l=this.offsetLeft-t.offsetLeft+this.clientWidth-i>t.scrollLeft+t.clientWidth,c=r&&!s;(r||s)&&e&&(t.scrollTop=this.offsetTop-t.offsetTop-t.clientHeight/2-o+this.clientHeight/2),(a||l)&&e&&(t.scrollLeft=this.offsetLeft-t.offsetLeft-t.clientWidth/2-i+this.clientWidth/2),(r||s||a||l)&&!e&&this.scrollIntoView(c)}),window.requestIdleCallback=window.requestIdleCallback||function(e){const t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)},window.cancelIdleCallback=window.cancelIdleCallback||function(e){clearTimeout(e)};const x=9,S=13,L=37,A=38,O=40,P=39;function I(e,t,n="log",o,i="color: inherit"){if(!("console"in window)||!window.console[n])return;const r=["info","log","warn","error"].includes(n),s=[];switch(I.logLevel){case"ERROR":if("error"!==n)return;break;case"WARN":if(!["error","warn"].includes(n))return;break;case"INFO":if(!r||e)return}o&&s.push(o);const a="Editor.js 2.31.0-rc.7";e&&(r?(s.unshift("line-height: 1em;\n            color: #006FEA;\n            display: inline-block;\n            font-size: 11px;\n            line-height: 1em;\n            background-color: #fff;\n            padding: 4px 9px;\n            border-radius: 30px;\n            border: 1px solid rgba(56, 138, 229, 0.16);\n            margin: 4px 5px 4px 0;",i),t=`%c${a}%c ${t}`):t=`( ${a} )${t}`);try{r?o?console[n](`${t} %o`,...s):console[n](t,...s):console[n](t)}catch{}}I.logLevel="VERBOSE";const _=I.bind(window,!1);I.bind(window,!0);function N(e){return Object.prototype.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function M(e){return"function"===N(e)||"asyncfunction"===N(e)}function B(e){return"object"===N(e)}function j(e){return"string"===N(e)}function R(e){return"number"===N(e)}function D(e){return"undefined"===N(e)}function H(e){return!e||0===Object.keys(e).length&&e.constructor===Object}async function F(e,t=()=>{},n=()=>{}){return e.reduce((async(e,o)=>(await e,async function(e,t,n){try{await e.function(e.data),await t(D(e.data)?{}:e.data)}catch{n(D(e.data)?{}:e.data)}}(o,t,n))),Promise.resolve())}function U(e){return Array.prototype.slice.call(e)}function V(e,t){return function(){const n=this,o=arguments;window.setTimeout((()=>e.apply(n,o)),t)}}function z(e){return e[0].toUpperCase()+e.slice(1)}function W(e,...t){if(!t.length)return e;const n=t.shift();if(B(e)&&B(n))for(const t in n)B(n[t])?(e[t]||Object.assign(e,{[t]:{}}),W(e[t],n[t])):Object.assign(e,{[t]:n[t]});return W(e,...t)}function K(e){const t=function(){const e={win:!1,mac:!1,x11:!1,linux:!1},t=Object.keys(e).find((e=>-1!==window.navigator.appVersion.toLowerCase().indexOf(e)));return t&&(e[t]=!0),e}();return e=e.replace(/shift/gi,"⇧").replace(/backspace/gi,"⌫").replace(/enter/gi,"⏎").replace(/up/gi,"↑").replace(/left/gi,"→").replace(/down/gi,"↓").replace(/right/gi,"←").replace(/escape/gi,"⎋").replace(/insert/gi,"Ins").replace(/delete/gi,"␡").replace(/\+/gi," + "),e=t.mac?e.replace(/ctrl|cmd/gi,"⌘").replace(/alt/gi,"⌥"):e.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN")}function $(e,t,n){const o=n.value?"value":"get",i=n[o],r=`#${t}Cache`;if(n[o]=function(...e){return void 0===this[r]&&(this[r]=i.apply(this,...e)),this[r]},"get"===o&&n.set){const t=n.set;n.set=function(n){delete e[r],t.apply(this,n)}}return n}function q(){return window.matchMedia("(max-width: 650px)").matches}const G=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1);class X{static isSingleTag(e){return e.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(e.tagName)}static isLineBreakTag(e){return e&&e.tagName&&["BR","WBR"].includes(e.tagName)}static make(e,t=null,n={}){const o=document.createElement(e);if(Array.isArray(t)){const e=t.filter((e=>void 0!==e));o.classList.add(...e)}else t&&o.classList.add(t);for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(o[e]=n[e]);return o}static text(e){return document.createTextNode(e)}static append(e,t){Array.isArray(t)?t.forEach((t=>e.appendChild(t))):e.appendChild(t)}static prepend(e,t){Array.isArray(t)?(t=t.reverse()).forEach((t=>e.prepend(t))):e.prepend(t)}static swap(e,t){const n=document.createElement("div"),o=e.parentNode;o.insertBefore(n,e),o.insertBefore(e,t),o.insertBefore(t,n),o.removeChild(n)}static find(e=document,t){return e.querySelector(t)}static get(e){return document.getElementById(e)}static findAll(e=document,t){return e.querySelectorAll(t)}static get allInputsSelector(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map((e=>`input[type="${e}"]`)).join(", ")}static findAllInputs(e){return U(e.querySelectorAll(X.allInputsSelector)).reduce(((e,t)=>X.isNativeInput(t)||X.containsOnlyInlineElements(t)?[...e,t]:[...e,...X.getDeepestBlockElements(t)]),[])}static getDeepestNode(e,t=!1){const n=t?"lastChild":"firstChild",o=t?"previousSibling":"nextSibling";if(e&&e.nodeType===Node.ELEMENT_NODE&&e[n]){let i=e[n];if(X.isSingleTag(i)&&!X.isNativeInput(i)&&!X.isLineBreakTag(i))if(i[o])i=i[o];else{if(!i.parentNode[o])return i.parentNode;i=i.parentNode[o]}return this.getDeepestNode(i,t)}return e}static isElement(e){return!R(e)&&(e&&e.nodeType&&e.nodeType===Node.ELEMENT_NODE)}static isFragment(e){return!R(e)&&(e&&e.nodeType&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)}static isContentEditable(e){return"true"===e.contentEditable}static isNativeInput(e){return!(!e||!e.tagName)&&["INPUT","TEXTAREA"].includes(e.tagName)}static canSetCaret(e){let t=!0;if(X.isNativeInput(e))switch(e.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":t=!1}else t=X.isContentEditable(e);return t}static isNodeEmpty(e,t){let n;return!(this.isSingleTag(e)&&!this.isLineBreakTag(e))&&(n=this.isElement(e)&&this.isNativeInput(e)?e.value:e.textContent.replace("​",""),t&&(n=n.replace(new RegExp(t,"g"),"")),0===n.length)}static isLeaf(e){return!!e&&0===e.childNodes.length}static isEmpty(e,t){const n=[e];for(;n.length>0;)if(e=n.shift()){if(this.isLeaf(e)&&!this.isNodeEmpty(e,t))return!1;e.childNodes&&n.push(...Array.from(e.childNodes))}return!0}static isHTMLString(e){const t=X.make("div");return t.innerHTML=e,t.childElementCount>0}static getContentLength(e){return X.isNativeInput(e)?e.value.length:e.nodeType===Node.TEXT_NODE?e.length:e.textContent.length}static get blockElements(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}static containsOnlyInlineElements(e){let t;j(e)?(t=document.createElement("div"),t.innerHTML=e):t=e;const n=e=>!X.blockElements.includes(e.tagName.toLowerCase())&&Array.from(e.children).every(n);return Array.from(t.children).every(n)}static getDeepestBlockElements(e){return X.containsOnlyInlineElements(e)?[e]:Array.from(e.children).reduce(((e,t)=>[...e,...X.getDeepestBlockElements(t)]),[])}static getHolder(e){return j(e)?document.getElementById(e):e}static isAnchor(e){return"a"===e.tagName.toLowerCase()}static offset(e){const t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop,i=t.top+o,r=t.left+n;return{top:i,left:r,bottom:i+t.height,right:r+t.width}}}const Y={ui:{blockTunes:{toggler:{"Click to tune":"","or drag to move":""}},inlineToolbar:{converter:{"Convert to":""}},toolbar:{toolbox:{Add:""}},popover:{Filter:"","Nothing found":"","Convert to":""}},toolNames:{Text:"",Link:"",Bold:"",Italic:""},tools:{link:{"Add a link":""},stub:{"The block can not be displayed correctly.":""}},blockTunes:{delete:{Delete:"","Click to delete":""},moveUp:{"Move up":""},moveDown:{"Move down":""}}},J=class e{static ui(t,n){return e._t(t,n)}static t(t,n){return e._t(t,n)}static setDictionary(t){e.currentDictionary=t}static _t(t,n){const o=e.getNamespace(t);return o&&o[n]?o[n]:n}static getNamespace(t){return t.split(".").reduce(((e,t)=>e&&Object.keys(e).length?e[t]:{}),e.currentDictionary)}};J.currentDictionary=Y;let Q=J;Error;class Z{constructor(){this.subscribers={}}on(e,t){e in this.subscribers||(this.subscribers[e]=[]),this.subscribers[e].push(t)}once(e,t){e in this.subscribers||(this.subscribers[e]=[]);const n=o=>{const i=t(o),r=this.subscribers[e].indexOf(n);return-1!==r&&this.subscribers[e].splice(r,1),i};this.subscribers[e].push(n)}emit(e,t){H(this.subscribers)||!this.subscribers[e]||this.subscribers[e].reduce(((e,t)=>{const n=t(e);return void 0!==n?n:e}),t)}off(e,t){if(void 0!==this.subscribers[e]){for(let n=0;n<this.subscribers[e].length;n++)if(this.subscribers[e][n]===t){delete this.subscribers[e][n];break}}else console.warn(`EventDispatcher .off(): there is no subscribers for event "${e.toString()}". Probably, .off() called before .on()`)}destroy(){this.subscribers={}}}class ee{constructor(){this.allListeners=[]}on(e,t,n,o=!1){const i=function(e=""){return`${e}${Math.floor(1e8*Math.random()).toString(16)}`}("l"),r={id:i,element:e,eventType:t,handler:n,options:o};if(!this.findOne(e,t,n))return this.allListeners.push(r),e.addEventListener(t,n,o),i}off(e,t,n,o){const i=this.findAll(e,t,n);i.forEach(((e,t)=>{const n=this.allListeners.indexOf(i[t]);n>-1&&(this.allListeners.splice(n,1),e.element.removeEventListener(e.eventType,e.handler,e.options))}))}offById(e){const t=this.findById(e);t&&t.element.removeEventListener(t.eventType,t.handler,t.options)}findOne(e,t,n){const o=this.findAll(e,t,n);return o.length>0?o[0]:null}findAll(e,t,n){let o;const i=e?this.findByEventTarget(e):[];return o=e&&t&&n?i.filter((e=>e.eventType===t&&e.handler===n)):e&&t?i.filter((e=>e.eventType===t)):i,o}removeAll(){this.allListeners.map((e=>{e.element.removeEventListener(e.eventType,e.handler,e.options)})),this.allListeners=[]}destroy(){this.removeAll()}findByEventTarget(e){return this.allListeners.filter((t=>{if(t.element===e)return t}))}findByType(e){return this.allListeners.filter((t=>{if(t.eventType===e)return t}))}findByHandler(e){return this.allListeners.filter((t=>{if(t.handler===e)return t}))}findById(e){return this.allListeners.find((t=>t.id===e))}}class te{constructor({config:e,eventsDispatcher:t}){if(this.nodes={},this.listeners=new ee,this.readOnlyMutableListeners={on:(e,t,n,o=!1)=>{this.mutableListenerIds.push(this.listeners.on(e,t,n,o))},clearAll:()=>{for(const e of this.mutableListenerIds)this.listeners.offById(e);this.mutableListenerIds=[]}},this.mutableListenerIds=[],new.target===te)throw new TypeError("Constructors for abstract class Module are not allowed.");this.config=e,this.eventsDispatcher=t}set state(e){this.Editor=e}removeAllNodes(){for(const e in this.nodes){const t=this.nodes[e];t instanceof HTMLElement&&t.remove()}}get isRtl(){return"rtl"===this.config.i18n.direction}}class ne{constructor(){this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}static get CSS(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}static get anchorNode(){const e=window.getSelection();return e?e.anchorNode:null}static get anchorElement(){const e=window.getSelection();if(!e)return null;const t=e.anchorNode;return t?X.isElement(t)?t:t.parentElement:null}static get anchorOffset(){const e=window.getSelection();return e?e.anchorOffset:null}static get isCollapsed(){const e=window.getSelection();return e?e.isCollapsed:null}static get isAtEditor(){return this.isSelectionAtEditor(ne.get())}static isSelectionAtEditor(e){if(!e)return!1;let t=e.anchorNode||e.focusNode;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let n=null;return t&&t instanceof Element&&(n=t.closest(`.${ne.CSS.editorZone}`)),!!n&&n.nodeType===Node.ELEMENT_NODE}static isRangeAtEditor(e){if(!e)return;let t=e.startContainer;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let n=null;return t&&t instanceof Element&&(n=t.closest(`.${ne.CSS.editorZone}`)),!!n&&n.nodeType===Node.ELEMENT_NODE}static get isSelectionExists(){return!!ne.get().anchorNode}static get range(){return this.getRangeFromSelection(this.get())}static getRangeFromSelection(e){return e&&e.rangeCount?e.getRangeAt(0):null}static get rect(){let e,t=document.selection,n={x:0,y:0,width:0,height:0};if(t&&"Control"!==t.type)return e=t.createRange(),n.x=e.boundingLeft,n.y=e.boundingTop,n.width=e.boundingWidth,n.height=e.boundingHeight,n;if(!window.getSelection)return _("Method window.getSelection is not supported","warn"),n;if(t=window.getSelection(),null===t.rangeCount||isNaN(t.rangeCount))return _("Method SelectionUtils.rangeCount is not supported","warn"),n;if(0===t.rangeCount)return n;if(e=t.getRangeAt(0).cloneRange(),e.getBoundingClientRect&&(n=e.getBoundingClientRect()),0===n.x&&0===n.y){const t=document.createElement("span");if(t.getBoundingClientRect){t.appendChild(document.createTextNode("​")),e.insertNode(t),n=t.getBoundingClientRect();const o=t.parentNode;o.removeChild(t),o.normalize()}}return n}static get text(){return window.getSelection?window.getSelection().toString():""}static get(){return window.getSelection()}static setCursor(e,t=0){const n=document.createRange(),o=window.getSelection();return X.isNativeInput(e)?X.canSetCaret(e)?(e.focus(),e.selectionStart=e.selectionEnd=t,e.getBoundingClientRect()):void 0:(n.setStart(e,t),n.setEnd(e,t),o.removeAllRanges(),o.addRange(n),n.getBoundingClientRect())}static isRangeInsideContainer(e){const t=ne.range;return null!==t&&e.contains(t.startContainer)}static addFakeCursor(){const e=ne.range;if(null===e)return;const t=X.make("span","codex-editor__fake-cursor");t.dataset.mutationFree="true",e.collapse(),e.insertNode(t)}static isFakeCursorInsideContainer(e){return null!==X.find(e,".codex-editor__fake-cursor")}static removeFakeCursor(e=document.body){const t=X.find(e,".codex-editor__fake-cursor");t&&t.remove()}removeFakeBackground(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}setFakeBackground(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}save(){this.savedSelectionRange=ne.range}restore(){if(!this.savedSelectionRange)return;const e=window.getSelection();e.removeAllRanges(),e.addRange(this.savedSelectionRange)}clearSaved(){this.savedSelectionRange=null}collapseToEnd(){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(e.focusNode),t.collapse(!1),e.removeAllRanges(),e.addRange(t)}findParentTag(e,t,n=10){const o=window.getSelection();let i=null;return o&&o.anchorNode&&o.focusNode?([o.anchorNode,o.focusNode].forEach((o=>{let r=n;for(;r>0&&o.parentNode&&(o.tagName!==e||(i=o,t&&o.classList&&!o.classList.contains(t)&&(i=null),!i));)o=o.parentNode,r--})),i):null}expandToTag(e){const t=window.getSelection();t.removeAllRanges();const n=document.createRange();n.selectNodeContents(e),t.addRange(n)}}const oe="editor mobile layout toggled";function ie(e,t){if(!e.conversionConfig)return!1;const n=e.conversionConfig[t];return M(n)||j(n)}function re(e,t){return Object.entries(e).some((([e,n])=>t[e]&&function(e,t){const n=Array.isArray(e)||B(e),o=Array.isArray(t)||B(t);return n||o?JSON.stringify(e)===JSON.stringify(t):e===t}(t[e],n)))}async function se(e,t){const n=(await e.save()).data,o=t.find((t=>t.name===e.name));return void 0===o||ie(o,"export")?t.reduce(((t,o)=>{if(!ie(o,"import")||void 0===o.toolbox)return t;const i=o.toolbox.filter((t=>{if(H(t)||void 0===t.icon)return!1;if(void 0!==t.data){if(re(t.data,n))return!1}else if(o.name===e.name)return!1;return!0}));return t.push({...o,toolbox:i}),t}),[]):[]}var ae=(e=>(e.Default="default",e.Separator="separator",e.Html="html",e))(ae||{}),le=(e=>(e.APPEND_CALLBACK="appendCallback",e.RENDERED="rendered",e.MOVED="moved",e.UPDATED="updated",e.REMOVED="removed",e.ON_PASTE="onPaste",e))(le||{});var ce={exports:{}};!function(e){window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){n(1),e.exports=function(){var e=n(6),t="cdx-notify--bounce-in",o=null;return{show:function(n){if(n.message){!function(){if(o)return!0;o=e.getWrapper(),document.body.appendChild(o)}();var i=null,r=n.time||8e3;switch(n.type){case"confirm":i=e.confirm(n);break;case"prompt":i=e.prompt(n);break;default:i=e.alert(n),window.setTimeout((function(){i.remove()}),r)}o.appendChild(i),i.classList.add(t)}}}}()},function(e,t,n){var o=n(2);"string"==typeof o&&(o=[[e.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(4)(o,i),o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,'.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:\'\';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:\'\';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}',""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,o=e[1]||"",i=e[3];if(!i)return o;if(t&&"function"==typeof btoa){var r=(n=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),s=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[o].concat(s).concat([r]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(o[r]=!0)}for(i=0;i<e.length;i++){var s=e[i];"number"==typeof s[0]&&o[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t,n){var o,i,r={},s=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=o.apply(this,arguments)),i}),a=function(){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(e){return document.querySelector(e)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch{n=null}e[t]=n}return e[t]}}(),l=null,c=0,u=[],d=n(5);function h(e,t){for(var n=0;n<e.length;n++){var o=e[n],i=r[o.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](o.parts[s]);for(;s<o.parts.length;s++)i.parts.push(b(o.parts[s],t))}else{var a=[];for(s=0;s<o.parts.length;s++)a.push(b(o.parts[s],t));r[o.id]={id:o.id,refs:1,parts:a}}}}function p(e,t){for(var n=[],o={},i=0;i<e.length;i++){var r=e[i],s=t.base?r[0]+t.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};o[s]?o[s].parts.push(a):n.push(o[s]={id:s,parts:[a]})}return n}function f(e,t){var n=a(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=u[u.length-1];if("top"===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),u.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=a(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,i)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function v(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),m(t,e.attrs),f(e,t),t}function m(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function b(e,t){var n,o,i,r;if(t.transform&&e.css){if(!(r=t.transform(e.css)))return function(){};e.css=r}if(t.singleton){var s=c++;n=l||(l=v(t)),o=k.bind(null,n,s,!1),i=k.bind(null,n,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",m(t,e.attrs),f(e,t),t}(t),o=function(e,t,n){var o=n.css,i=n.sourceMap,r=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||r)&&(o=d(o)),i&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([o],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n,t),i=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),o=function(e,t){var n=t.css,o=t.media;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){g(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else i()}}e.exports=function(e,t){if(typeof DEBUG<"u"&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return h(n,t),function(e){for(var o=[],i=0;i<n.length;i++){var s=n[i];(a=r[s.id]).refs--,o.push(a)}for(e&&h(p(e,t),t),i=0;i<o.length;i++){var a;if(0===(a=o[i]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete r[a.id]}}}};var y,w=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function k(e,t,n,o){var i=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=w(t,i);else{var r=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}},function(e,t){e.exports=function(e){var t=typeof window<"u"&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,o=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var i,r=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?e:(i=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:o+r.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(e,t,n){var o,i,r,s,a,l,c,u,d;e.exports=(o="cdx-notifies",i="cdx-notify",r="cdx-notify__cross",s="cdx-notify__button--confirm",a="cdx-notify__button--cancel",l="cdx-notify__input",c="cdx-notify__button",u="cdx-notify__btns-wrapper",{alert:d=function(e){var t=document.createElement("DIV"),n=document.createElement("DIV"),o=e.message,s=e.style;return t.classList.add(i),s&&t.classList.add(i+"--"+s),t.innerHTML=o,n.classList.add(r),n.addEventListener("click",t.remove.bind(t)),t.appendChild(n),t},confirm:function(e){var t=d(e),n=document.createElement("div"),o=document.createElement("button"),i=document.createElement("button"),l=t.querySelector("."+r),h=e.cancelHandler,p=e.okHandler;return n.classList.add(u),o.innerHTML=e.okText||"Confirm",i.innerHTML=e.cancelText||"Cancel",o.classList.add(c),i.classList.add(c),o.classList.add(s),i.classList.add(a),h&&"function"==typeof h&&(i.addEventListener("click",h),l.addEventListener("click",h)),p&&"function"==typeof p&&o.addEventListener("click",p),o.addEventListener("click",t.remove.bind(t)),i.addEventListener("click",t.remove.bind(t)),n.appendChild(o),n.appendChild(i),t.appendChild(n),t},prompt:function(e){var t=d(e),n=document.createElement("div"),o=document.createElement("button"),i=document.createElement("input"),a=t.querySelector("."+r),h=e.cancelHandler,p=e.okHandler;return n.classList.add(u),o.innerHTML=e.okText||"Ok",o.classList.add(c),o.classList.add(s),i.classList.add(l),e.placeholder&&i.setAttribute("placeholder",e.placeholder),e.default&&(i.value=e.default),e.inputType&&(i.type=e.inputType),h&&"function"==typeof h&&a.addEventListener("click",h),p&&"function"==typeof p&&o.addEventListener("click",(function(){p(i.value)})),o.addEventListener("click",t.remove.bind(t)),n.appendChild(i),n.appendChild(o),t.appendChild(n),t},getWrapper:function(){var e=document.createElement("DIV");return e.classList.add(o),e}})}])}(ce);var ue={exports:{}};!function(e){e.exports=function(){function e(e){var t=e.tags,n=Object.keys(t).map((function(e){return typeof t[e]})).every((function(e){return"object"===e||"boolean"===e||"function"===e}));if(!n)throw new Error("The configuration was invalid");this.config=e}var t=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function n(e){return-1!==t.indexOf(e.nodeName)}var o=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function i(e){return-1!==o.indexOf(e.nodeName)}function r(e,t){return e.createTreeWalker(t,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function s(e,t,n){return"function"==typeof e.tags[t]?e.tags[t](n):e.tags[t]}function a(e,t){return typeof t>"u"||"boolean"==typeof t&&!t}function l(e,t,n){var o=e.name.toLowerCase();return!0!==t&&("function"==typeof t[o]?!t[o](e.value,n):typeof t[o]>"u"||!1===t[o]||"string"==typeof t[o]&&t[o]!==e.value)}return e.prototype.clean=function(e){const t=document.implementation.createHTMLDocument(),n=t.createElement("div");return n.innerHTML=e,this._sanitize(t,n),n.innerHTML},e.prototype._sanitize=function(e,t){var o=r(e,t),c=o.firstChild();if(c)do{if(c.nodeType!==Node.TEXT_NODE){if(c.nodeType===Node.COMMENT_NODE){t.removeChild(c),this._sanitize(e,t);break}var u,d=i(c);d&&(u=Array.prototype.some.call(c.childNodes,n));var h=!!t.parentNode,p=n(t)&&n(c)&&h,f=c.nodeName.toLowerCase(),g=s(this.config,f,c);if(d&&u||a(c,g)||!this.config.keepNestedBlockElements&&p){if("SCRIPT"!==c.nodeName&&"STYLE"!==c.nodeName)for(;c.childNodes.length>0;)t.insertBefore(c.childNodes[0],c);t.removeChild(c),this._sanitize(e,t);break}for(var v=0;v<c.attributes.length;v+=1){var m=c.attributes[v];l(m,g,c)&&(c.removeAttribute(m.name),v-=1)}this._sanitize(e,c)}else if(""===c.data.trim()&&(c.previousElementSibling&&n(c.previousElementSibling)||c.nextElementSibling&&n(c.nextElementSibling))){t.removeChild(c),this._sanitize(e,t);break}}while(c=o.nextSibling())},e}()}(ue);const de=C(ue.exports);function he(e,t){return e.map((e=>{const n=M(t)?t(e.tool):t;return H(n)||(e.data=fe(e.data,n)),e}))}function pe(e,t={}){return new de({tags:t}).clean(e)}function fe(e,t){return Array.isArray(e)?function(e,t){return e.map((e=>fe(e,t)))}(e,t):B(e)?function(e,t){const n={};for(const o in e){if(!Object.prototype.hasOwnProperty.call(e,o))continue;const i=e[o],r=ge(t[o])?t[o]:t;n[o]=fe(i,r)}return n}(e,t):j(e)?function(e,t){return B(t)?pe(e,t):!1===t?pe(e,{}):e}(e,t):e}function ge(e){return B(e)||function(e){return"boolean"===N(e)}(e)||M(e)}var ve={exports:{}};!function(e){window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){n.r(t),n.d(t,"default",(function(){return o}));class o{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.handleWindowScroll=()=>{this.showed&&this.hide(!0)},this.loadStyles(),this.prepare(),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(e,t,n){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);const o=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},n);if(o.hidingDelay&&(this.hidingDelay=o.hidingDelay),this.nodes.content.innerHTML="","string"==typeof t)this.nodes.content.appendChild(document.createTextNode(t));else{if(!(t instanceof Node))throw Error("[CodeX Tooltip] Wrong type of «content» passed. It should be an instance of Node or String. But "+typeof t+" given.");this.nodes.content.appendChild(t)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),o.placement){case"top":this.placeTop(e,o);break;case"left":this.placeLeft(e,o);break;case"right":this.placeRight(e,o);break;default:this.placeBottom(e,o)}o&&o.delay?this.showingTimeout=setTimeout((()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0}),o.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(e=!1){if(this.hidingDelay&&!e)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout((()=>{this.hide(!0)}),this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(e,t,n){e.addEventListener("mouseenter",(()=>{this.show(e,t,n)})),e.addEventListener("mouseleave",(()=>{this.hide()}))}destroy(){this.nodes.wrapper.remove(),window.removeEventListener("scroll",this.handleWindowScroll)}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){const e="codex-tooltips-style";if(document.getElementById(e))return;const t=n(2),o=this.make("style",null,{textContent:t.toString(),id:e});this.prepend(document.head,o)}placeBottom(e,t){const n=e.getBoundingClientRect(),o=n.left+e.clientWidth/2-this.nodes.wrapper.offsetWidth/2,i=n.bottom+window.pageYOffset+this.offsetTop+t.marginTop;this.applyPlacement("bottom",o,i)}placeTop(e,t){const n=e.getBoundingClientRect(),o=n.left+e.clientWidth/2-this.nodes.wrapper.offsetWidth/2,i=n.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",o,i)}placeLeft(e,t){const n=e.getBoundingClientRect(),o=n.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-t.marginLeft,i=n.top+window.pageYOffset+e.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",o,i)}placeRight(e,t){const n=e.getBoundingClientRect(),o=n.right+this.offsetRight+t.marginRight,i=n.top+window.pageYOffset+e.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",o,i)}applyPlacement(e,t,n){this.nodes.wrapper.classList.add(this.CSS.placement[e]),this.nodes.wrapper.style.left=t+"px",this.nodes.wrapper.style.top=n+"px"}make(e,t=null,n={}){const o=document.createElement(e);Array.isArray(t)?o.classList.add(...t):t&&o.classList.add(t);for(const e in n)n.hasOwnProperty(e)&&(o[e]=n[e]);return o}append(e,t){Array.isArray(t)?t.forEach((t=>e.appendChild(t))):e.appendChild(t)}prepend(e,t){Array.isArray(t)?(t=t.reverse()).forEach((t=>e.prepend(t))):e.prepend(t)}}},function(e,t){e.exports='.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>\') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}'}]).default}(ve);const me=C(ve.exports);let be=null;function ye(){be||(be=new me)}function we(e=!1){ye(),null==be||be.hide(e)}function ke(e,t,n){ye(),null==be||be.onHover(e,t,n)}const Ce=function e(t,n){const o={};return Object.entries(t).forEach((([t,i])=>{if(B(i)){const r=n?`${n}.${t}`:t;Object.values(i).every((e=>j(e)))?o[t]=r:o[t]=e(i,r)}else o[t]=i})),o}(Y);const Ee=class e{constructor(e,t){this.cursor=-1,this.items=[],this.items=e||[],this.focusedCssClass=t}get currentItem(){return-1===this.cursor?null:this.items[this.cursor]}setCursor(e){e<this.items.length&&e>=-1&&(this.dropCursor(),this.cursor=e,this.items[this.cursor].classList.add(this.focusedCssClass))}setItems(e){this.items=e}next(){this.cursor=this.leafNodesAndReturnIndex(e.directions.RIGHT)}previous(){this.cursor=this.leafNodesAndReturnIndex(e.directions.LEFT)}dropCursor(){-1!==this.cursor&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}leafNodesAndReturnIndex(t){if(0===this.items.length)return this.cursor;let n=this.cursor;return-1===n?n=t===e.directions.RIGHT?-1:0:this.items[n].classList.remove(this.focusedCssClass),n=t===e.directions.RIGHT?(n+1)%this.items.length:(this.items.length+n-1)%this.items.length,X.canSetCaret(this.items[n])&&V((()=>ne.setCursor(this.items[n])),50)(),this.items[n].classList.add(this.focusedCssClass),n}};Ee.directions={RIGHT:"right",LEFT:"left"};let Te=Ee;class xe{constructor(e){this.iterator=null,this.activated=!1,this.flipCallbacks=[],this.onKeyDown=e=>{if(this.isEventReadyForHandling(e))switch(xe.usedKeys.includes(e.keyCode)&&e.preventDefault(),e.keyCode){case x:this.handleTabPress(e);break;case L:case A:this.flipLeft();break;case P:case O:this.flipRight();break;case S:this.handleEnterPress(e)}},this.iterator=new Te(e.items,e.focusedItemClass),this.activateCallback=e.activateCallback,this.allowedKeys=e.allowedKeys||xe.usedKeys}get isActivated(){return this.activated}static get usedKeys(){return[x,L,P,S,A,O]}activate(e,t){this.activated=!0,e&&this.iterator.setItems(e),void 0!==t&&this.iterator.setCursor(t),document.addEventListener("keydown",this.onKeyDown,!0)}deactivate(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}focusFirst(){this.dropCursor(),this.flipRight()}flipLeft(){this.iterator.previous(),this.flipCallback()}flipRight(){this.iterator.next(),this.flipCallback()}hasFocus(){return!!this.iterator.currentItem}onFlip(e){this.flipCallbacks.push(e)}removeOnFlip(e){this.flipCallbacks=this.flipCallbacks.filter((t=>t!==e))}dropCursor(){this.iterator.dropCursor()}isEventReadyForHandling(e){return this.activated&&this.allowedKeys.includes(e.keyCode)}handleTabPress(e){switch(e.shiftKey?Te.directions.LEFT:Te.directions.RIGHT){case Te.directions.RIGHT:this.flipRight();break;case Te.directions.LEFT:this.flipLeft()}}handleEnterPress(e){this.activated&&(this.iterator.currentItem&&(e.stopPropagation(),e.preventDefault(),this.iterator.currentItem.click()),M(this.activateCallback)&&this.activateCallback(this.iterator.currentItem))}flipCallback(){this.iterator.currentItem&&this.iterator.currentItem.scrollIntoViewIfNeeded(),this.flipCallbacks.forEach((e=>e()))}}const Se='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>',Le='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M11.5 17.5L5 11M5 11V15.5M5 11H9.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12.5 6.5L19 13M19 13V8.5M19 13H14.5"/></svg>';function Ae(e){return(t,n)=>[[e,t].filter((e=>!!e)).join("__"),n].filter((e=>!!e)).join("--")}const Oe=Ae("ce-hint"),Pe={root:Oe(),alignedStart:Oe(null,"align-left"),alignedCenter:Oe(null,"align-center"),title:Oe("title"),description:Oe("description")};class Ie{constructor(e){this.nodes={root:X.make("div",[Pe.root,"center"===e.alignment?Pe.alignedCenter:Pe.alignedStart]),title:X.make("div",Pe.title,{textContent:e.title})},this.nodes.root.appendChild(this.nodes.title),void 0!==e.description&&(this.nodes.description=X.make("div",Pe.description,{textContent:e.description}),this.nodes.root.appendChild(this.nodes.description))}getElement(){return this.nodes.root}}class _e{constructor(e){this.params=e}get name(){if(void 0!==this.params&&"name"in this.params)return this.params.name}destroy(){we()}onChildrenOpen(){var e;void 0!==this.params&&"children"in this.params&&"function"==typeof(null==(e=this.params.children)?void 0:e.onOpen)&&this.params.children.onOpen()}onChildrenClose(){var e;void 0!==this.params&&"children"in this.params&&"function"==typeof(null==(e=this.params.children)?void 0:e.onClose)&&this.params.children.onClose()}handleClick(){var e,t;void 0!==this.params&&"onActivate"in this.params&&(null==(t=(e=this.params).onActivate)||t.call(e,this.params))}addHint(e,t){ke(e,new Ie(t).getElement(),{placement:t.position,hidingDelay:100})}get children(){var e;return void 0!==this.params&&"children"in this.params&&void 0!==(null==(e=this.params.children)?void 0:e.items)?this.params.children.items:[]}get hasChildren(){return this.children.length>0}get isChildrenOpen(){var e;return void 0!==this.params&&"children"in this.params&&!0===(null==(e=this.params.children)?void 0:e.isOpen)}get isChildrenFlippable(){var e;return!(void 0===this.params||!("children"in this.params)||!1===(null==(e=this.params.children)?void 0:e.isFlippable))}get isChildrenSearchable(){var e;return void 0!==this.params&&"children"in this.params&&!0===(null==(e=this.params.children)?void 0:e.searchable)}get closeOnActivate(){return void 0!==this.params&&"closeOnActivate"in this.params&&this.params.closeOnActivate}get isActive(){return void 0!==this.params&&"isActive"in this.params&&("function"==typeof this.params.isActive?this.params.isActive():!0===this.params.isActive)}}const Ne=Ae("ce-popover-item"),Me={container:Ne(),active:Ne(null,"active"),disabled:Ne(null,"disabled"),focused:Ne(null,"focused"),hidden:Ne(null,"hidden"),confirmationState:Ne(null,"confirmation"),noHover:Ne(null,"no-hover"),noFocus:Ne(null,"no-focus"),title:Ne("title"),secondaryTitle:Ne("secondary-title"),icon:Ne("icon"),iconTool:Ne("icon","tool"),iconChevronRight:Ne("icon","chevron-right"),wobbleAnimation:Ae("wobble")()};class Be extends _e{constructor(e,t){super(e),this.params=e,this.nodes={root:null,icon:null},this.confirmationState=null,this.removeSpecialFocusBehavior=()=>{var e;null==(e=this.nodes.root)||e.classList.remove(Me.noFocus)},this.removeSpecialHoverBehavior=()=>{var e;null==(e=this.nodes.root)||e.classList.remove(Me.noHover)},this.onErrorAnimationEnd=()=>{var e,t;null==(e=this.nodes.icon)||e.classList.remove(Me.wobbleAnimation),null==(t=this.nodes.icon)||t.removeEventListener("animationend",this.onErrorAnimationEnd)},this.nodes.root=this.make(e,t)}get isDisabled(){return!0===this.params.isDisabled}get toggle(){return this.params.toggle}get title(){return this.params.title}get isConfirmationStateEnabled(){return null!==this.confirmationState}get isFocused(){return null!==this.nodes.root&&this.nodes.root.classList.contains(Me.focused)}getElement(){return this.nodes.root}handleClick(){this.isConfirmationStateEnabled&&null!==this.confirmationState?this.activateOrEnableConfirmationMode(this.confirmationState):this.activateOrEnableConfirmationMode(this.params)}toggleActive(e){var t;null==(t=this.nodes.root)||t.classList.toggle(Me.active,e)}toggleHidden(e){var t;null==(t=this.nodes.root)||t.classList.toggle(Me.hidden,e)}reset(){this.isConfirmationStateEnabled&&this.disableConfirmationMode()}onFocus(){this.disableSpecialHoverAndFocusBehavior()}make(e,t){var n,o;const i=(null==t?void 0:t.wrapperTag)||"div",r=X.make(i,Me.container,{type:"button"===i?"button":void 0});return e.name&&(r.dataset.itemName=e.name),this.nodes.icon=X.make("div",[Me.icon,Me.iconTool],{innerHTML:e.icon||'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>'}),r.appendChild(this.nodes.icon),void 0!==e.title&&r.appendChild(X.make("div",Me.title,{innerHTML:e.title||""})),e.secondaryLabel&&r.appendChild(X.make("div",Me.secondaryTitle,{textContent:e.secondaryLabel})),this.hasChildren&&r.appendChild(X.make("div",[Me.icon,Me.iconChevronRight],{innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.58284 17.5L14.4414 12.6414C14.5195 12.5633 14.5195 12.4367 14.4414 12.3586L9.58284 7.5"/></svg>'})),this.isActive&&r.classList.add(Me.active),e.isDisabled&&r.classList.add(Me.disabled),void 0!==e.hint&&!1!==(null==(n=null==t?void 0:t.hint)?void 0:n.enabled)&&this.addHint(r,{...e.hint,position:(null==(o=null==t?void 0:t.hint)?void 0:o.position)||"right"}),r}enableConfirmationMode(e){if(null===this.nodes.root)return;const t={...this.params,...e,confirmation:"confirmation"in e?e.confirmation:void 0},n=this.make(t);this.nodes.root.innerHTML=n.innerHTML,this.nodes.root.classList.add(Me.confirmationState),this.confirmationState=e,this.enableSpecialHoverAndFocusBehavior()}disableConfirmationMode(){if(null===this.nodes.root)return;const e=this.make(this.params);this.nodes.root.innerHTML=e.innerHTML,this.nodes.root.classList.remove(Me.confirmationState),this.confirmationState=null,this.disableSpecialHoverAndFocusBehavior()}enableSpecialHoverAndFocusBehavior(){var e,t,n;null==(e=this.nodes.root)||e.classList.add(Me.noHover),null==(t=this.nodes.root)||t.classList.add(Me.noFocus),null==(n=this.nodes.root)||n.addEventListener("mouseleave",this.removeSpecialHoverBehavior,{once:!0})}disableSpecialHoverAndFocusBehavior(){var e;this.removeSpecialFocusBehavior(),this.removeSpecialHoverBehavior(),null==(e=this.nodes.root)||e.removeEventListener("mouseleave",this.removeSpecialHoverBehavior)}activateOrEnableConfirmationMode(e){var t;if("confirmation"in e&&void 0!==e.confirmation)this.enableConfirmationMode(e.confirmation);else try{null==(t=e.onActivate)||t.call(e,e),this.disableConfirmationMode()}catch{this.animateError()}}animateError(){var e,t,n;null!=(e=this.nodes.icon)&&e.classList.contains(Me.wobbleAnimation)||(null==(t=this.nodes.icon)||t.classList.add(Me.wobbleAnimation),null==(n=this.nodes.icon)||n.addEventListener("animationend",this.onErrorAnimationEnd))}}const je=Ae("ce-popover-item-separator"),Re={container:je(),line:je("line"),hidden:je(null,"hidden")};class De extends _e{constructor(){super(),this.nodes={root:X.make("div",Re.container),line:X.make("div",Re.line)},this.nodes.root.appendChild(this.nodes.line)}getElement(){return this.nodes.root}toggleHidden(e){var t;null==(t=this.nodes.root)||t.classList.toggle(Re.hidden,e)}}var He=(e=>(e.Closed="closed",e.ClosedOnActivate="closed-on-activate",e))(He||{});const Fe=Ae("ce-popover"),Ue={popover:Fe(),popoverContainer:Fe("container"),popoverOpenTop:Fe(null,"open-top"),popoverOpenLeft:Fe(null,"open-left"),popoverOpened:Fe(null,"opened"),search:Fe("search"),nothingFoundMessage:Fe("nothing-found-message"),nothingFoundMessageDisplayed:Fe("nothing-found-message","displayed"),items:Fe("items"),overlay:Fe("overlay"),overlayHidden:Fe("overlay","hidden"),popoverNested:Fe(null,"nested"),getPopoverNestedClass:e=>Fe(null,`nested-level-${e.toString()}`),popoverInline:Fe(null,"inline"),popoverHeader:Fe("header")};var Ve=(e=>(e.NestingLevel="--nesting-level",e.PopoverHeight="--popover-height",e.InlinePopoverWidth="--inline-popover-width",e.TriggerItemLeft="--trigger-item-left",e.TriggerItemTop="--trigger-item-top",e))(Ve||{});const ze=Ae("ce-popover-item-html"),We={root:ze(),hidden:ze(null,"hidden")};class Ke extends _e{constructor(e,t){var n,o;super(e),this.nodes={root:X.make("div",We.root)},this.nodes.root.appendChild(e.element),e.name&&(this.nodes.root.dataset.itemName=e.name),void 0!==e.hint&&!1!==(null==(n=null==t?void 0:t.hint)?void 0:n.enabled)&&this.addHint(this.nodes.root,{...e.hint,position:(null==(o=null==t?void 0:t.hint)?void 0:o.position)||"right"})}getElement(){return this.nodes.root}toggleHidden(e){var t;null==(t=this.nodes.root)||t.classList.toggle(We.hidden,e)}getControls(){const e=this.nodes.root.querySelectorAll(`button, ${X.allInputsSelector}`);return Array.from(e)}}class $e extends Z{constructor(e,t={}){super(),this.params=e,this.itemsRenderParams=t,this.listeners=new ee,this.messages={nothingFound:"Nothing found",search:"Search"},this.items=this.buildItems(e.items),e.messages&&(this.messages={...this.messages,...e.messages}),this.nodes={},this.nodes.popoverContainer=X.make("div",[Ue.popoverContainer]),this.nodes.nothingFoundMessage=X.make("div",[Ue.nothingFoundMessage],{textContent:this.messages.nothingFound}),this.nodes.popoverContainer.appendChild(this.nodes.nothingFoundMessage),this.nodes.items=X.make("div",[Ue.items]),this.items.forEach((e=>{const t=e.getElement();null!==t&&this.nodes.items.appendChild(t)})),this.nodes.popoverContainer.appendChild(this.nodes.items),this.listeners.on(this.nodes.popoverContainer,"click",(e=>this.handleClick(e))),this.nodes.popover=X.make("div",[Ue.popover,this.params.class]),this.nodes.popover.appendChild(this.nodes.popoverContainer)}get itemsDefault(){return this.items.filter((e=>e instanceof Be))}getElement(){return this.nodes.popover}show(){this.nodes.popover.classList.add(Ue.popoverOpened),void 0!==this.search&&this.search.focus()}hide(){this.nodes.popover.classList.remove(Ue.popoverOpened),this.nodes.popover.classList.remove(Ue.popoverOpenTop),this.itemsDefault.forEach((e=>e.reset())),void 0!==this.search&&this.search.clear(),this.emit(He.Closed)}destroy(){var e;this.items.forEach((e=>e.destroy())),this.nodes.popover.remove(),this.listeners.removeAll(),null==(e=this.search)||e.destroy()}activateItemByName(e){const t=this.items.find((t=>t.name===e));this.handleItemClick(t)}buildItems(e){return e.map((e=>{switch(e.type){case ae.Separator:return new De;case ae.Html:return new Ke(e,this.itemsRenderParams[ae.Html]);default:return new Be(e,this.itemsRenderParams[ae.Default])}}))}getTargetItem(e){return this.items.filter((e=>e instanceof Be||e instanceof Ke)).find((t=>{const n=t.getElement();return null!==n&&e.composedPath().includes(n)}))}handleItemClick(e){if(!("isDisabled"in e)||!e.isDisabled){if(e.hasChildren)return this.showNestedItems(e),void("handleClick"in e&&"function"==typeof e.handleClick&&e.handleClick());this.itemsDefault.filter((t=>t!==e)).forEach((e=>e.reset())),"handleClick"in e&&"function"==typeof e.handleClick&&e.handleClick(),this.toggleItemActivenessIfNeeded(e),e.closeOnActivate&&(this.hide(),this.emit(He.ClosedOnActivate))}}handleClick(e){const t=this.getTargetItem(e);void 0!==t&&this.handleItemClick(t)}toggleItemActivenessIfNeeded(e){if(e instanceof Be&&(!0===e.toggle&&e.toggleActive(),"string"==typeof e.toggle)){const t=this.itemsDefault.filter((t=>t.toggle===e.toggle));if(1===t.length)return void e.toggleActive();t.forEach((t=>{t.toggleActive(t===e)}))}}}var qe=(e=>(e.Search="search",e))(qe||{});const Ge=Ae("cdx-search-field"),Xe={wrapper:Ge(),icon:Ge("icon"),input:Ge("input")};class Ye extends Z{constructor({items:e,placeholder:t}){super(),this.listeners=new ee,this.items=e,this.wrapper=X.make("div",Xe.wrapper);const n=X.make("div",Xe.icon,{innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="10.5" cy="10.5" r="5.5" stroke="currentColor" stroke-width="2"/><line x1="15.4142" x2="19" y1="15" y2="18.5858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>'});this.input=X.make("input",Xe.input,{placeholder:t,tabIndex:-1}),this.wrapper.appendChild(n),this.wrapper.appendChild(this.input),this.listeners.on(this.input,"input",(()=>{this.searchQuery=this.input.value,this.emit(qe.Search,{query:this.searchQuery,items:this.foundItems})}))}getElement(){return this.wrapper}focus(){this.input.focus()}clear(){this.input.value="",this.searchQuery="",this.emit(qe.Search,{query:"",items:this.foundItems})}destroy(){this.listeners.removeAll()}get foundItems(){return this.items.filter((e=>this.checkItem(e)))}checkItem(e){var t,n;const o=(null==(t=e.title)?void 0:t.toLowerCase())||"",i=null==(n=this.searchQuery)?void 0:n.toLowerCase();return void 0!==i&&o.includes(i)}}var Je=Object.defineProperty,Qe=Object.getOwnPropertyDescriptor;const Ze=class e extends $e{constructor(e,t){super(e,t),this.nestingLevel=0,this.nestedPopoverTriggerItem=null,this.previouslyHoveredItem=null,this.scopeElement=document.body,this.hide=()=>{var e;super.hide(),this.destroyNestedPopoverIfExists(),null==(e=this.flipper)||e.deactivate(),this.previouslyHoveredItem=null},this.onFlip=()=>{const e=this.itemsDefault.find((e=>e.isFocused));null==e||e.onFocus()},this.onSearch=e=>{var t;const n=""===e.query,o=0===e.items.length;this.items.forEach((t=>{let i=!1;t instanceof Be?i=!e.items.includes(t):(t instanceof De||t instanceof Ke)&&(i=o||!n),t.toggleHidden(i)})),this.toggleNothingFoundMessage(o);const i=""===e.query?this.flippableElements:e.items.map((e=>e.getElement()));null!=(t=this.flipper)&&t.isActivated&&(this.flipper.deactivate(),this.flipper.activate(i))},void 0!==e.nestingLevel&&(this.nestingLevel=e.nestingLevel),this.nestingLevel>0&&this.nodes.popover.classList.add(Ue.popoverNested),void 0!==e.scopeElement&&(this.scopeElement=e.scopeElement),null!==this.nodes.popoverContainer&&this.listeners.on(this.nodes.popoverContainer,"mouseover",(e=>this.handleHover(e))),e.searchable&&this.addSearch(),!1!==e.flippable&&(this.flipper=new xe({items:this.flippableElements,focusedItemClass:Me.focused,allowedKeys:[x,A,O,S]}),this.flipper.onFlip(this.onFlip))}hasFocus(){return void 0!==this.flipper&&this.flipper.hasFocus()}get scrollTop(){return null===this.nodes.items?0:this.nodes.items.scrollTop}get offsetTop(){return null===this.nodes.popoverContainer?0:this.nodes.popoverContainer.offsetTop}show(){var e;this.nodes.popover.style.setProperty(Ve.PopoverHeight,this.size.height+"px"),this.shouldOpenBottom||this.nodes.popover.classList.add(Ue.popoverOpenTop),this.shouldOpenRight||this.nodes.popover.classList.add(Ue.popoverOpenLeft),super.show(),null==(e=this.flipper)||e.activate(this.flippableElements)}destroy(){this.hide(),super.destroy()}showNestedItems(e){null!==this.nestedPopover&&void 0!==this.nestedPopover||(this.nestedPopoverTriggerItem=e,this.showNestedPopoverForItem(e))}handleHover(e){const t=this.getTargetItem(e);void 0!==t&&this.previouslyHoveredItem!==t&&(this.destroyNestedPopoverIfExists(),this.previouslyHoveredItem=t,t.hasChildren&&this.showNestedPopoverForItem(t))}setTriggerItemPosition(e,t){const n=t.getElement(),o=(n?n.offsetTop:0)-this.scrollTop,i=this.offsetTop+o;e.style.setProperty(Ve.TriggerItemTop,i+"px")}destroyNestedPopoverIfExists(){var e,t;void 0===this.nestedPopover||null===this.nestedPopover||(this.nestedPopover.off(He.ClosedOnActivate,this.hide),this.nestedPopover.hide(),this.nestedPopover.destroy(),this.nestedPopover.getElement().remove(),this.nestedPopover=null,null==(e=this.flipper)||e.activate(this.flippableElements),null==(t=this.nestedPopoverTriggerItem)||t.onChildrenClose())}showNestedPopoverForItem(t){var n;this.nestedPopover=new e({searchable:t.isChildrenSearchable,items:t.children,nestingLevel:this.nestingLevel+1,flippable:t.isChildrenFlippable,messages:this.messages}),t.onChildrenOpen(),this.nestedPopover.on(He.ClosedOnActivate,this.hide);const o=this.nestedPopover.getElement();return this.nodes.popover.appendChild(o),this.setTriggerItemPosition(o,t),o.style.setProperty(Ve.NestingLevel,this.nestedPopover.nestingLevel.toString()),this.nestedPopover.show(),null==(n=this.flipper)||n.deactivate(),this.nestedPopover}get shouldOpenBottom(){if(void 0===this.nodes.popover||null===this.nodes.popover)return!1;const e=this.nodes.popoverContainer.getBoundingClientRect(),t=this.scopeElement.getBoundingClientRect(),n=this.size.height,o=e.top+n,i=e.top-n,r=Math.min(window.innerHeight,t.bottom);return i<t.top||o<=r}get shouldOpenRight(){if(void 0===this.nodes.popover||null===this.nodes.popover)return!1;const e=this.nodes.popover.getBoundingClientRect(),t=this.scopeElement.getBoundingClientRect(),n=this.size.width,o=e.right+n,i=e.left-n,r=Math.min(window.innerWidth,t.right);return i<t.left||o<=r}get size(){var e;const t={height:0,width:0};if(null===this.nodes.popover)return t;const n=this.nodes.popover.cloneNode(!0);n.style.visibility="hidden",n.style.position="absolute",n.style.top="-1000px",n.classList.add(Ue.popoverOpened),null==(e=n.querySelector("."+Ue.popoverNested))||e.remove(),document.body.appendChild(n);const o=n.querySelector("."+Ue.popoverContainer);return t.height=o.offsetHeight,t.width=o.offsetWidth,n.remove(),t}get flippableElements(){return this.items.map((e=>e instanceof Be?e.getElement():e instanceof Ke?e.getControls():void 0)).flat().filter((e=>null!=e))}addSearch(){this.search=new Ye({items:this.itemsDefault,placeholder:this.messages.search}),this.search.on(qe.Search,this.onSearch);const e=this.search.getElement();e.classList.add(Ue.search),this.nodes.popoverContainer.insertBefore(e,this.nodes.popoverContainer.firstChild)}toggleNothingFoundMessage(e){this.nodes.nothingFoundMessage.classList.toggle(Ue.nothingFoundMessageDisplayed,e)}};((e,t,n,o)=>{for(var i,r=o>1?void 0:o?Qe(t,n):t,s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o?i(t,n,r):i(r))||r);o&&r&&Je(t,n,r)})([$],Ze.prototype,"size",1);let et=Ze;const tt=class e{constructor(){this.scrollPosition=null}lock(){G?this.lockHard():document.body.classList.add(e.CSS.scrollLocked)}unlock(){G?this.unlockHard():document.body.classList.remove(e.CSS.scrollLocked)}lockHard(){this.scrollPosition=window.pageYOffset,document.documentElement.style.setProperty("--window-scroll-offset",`${this.scrollPosition}px`),document.body.classList.add(e.CSS.scrollLockedHard)}unlockHard(){document.body.classList.remove(e.CSS.scrollLockedHard),null!==this.scrollPosition&&window.scrollTo(0,this.scrollPosition),this.scrollPosition=null}};tt.CSS={scrollLocked:"ce-scroll-locked",scrollLockedHard:"ce-scroll-locked--hard"};let nt=tt;const ot=Ae("ce-popover-header"),it={root:ot(),text:ot("text"),backButton:ot("back-button")};class rt{constructor({text:e,onBackButtonClick:t}){this.listeners=new ee,this.text=e,this.onBackButtonClick=t,this.nodes={root:X.make("div",[it.root]),backButton:X.make("button",[it.backButton]),text:X.make("div",[it.text])},this.nodes.backButton.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.5 17.5L9.64142 12.6414C9.56331 12.5633 9.56331 12.4367 9.64142 12.3586L14.5 7.5"/></svg>',this.nodes.root.appendChild(this.nodes.backButton),this.listeners.on(this.nodes.backButton,"click",this.onBackButtonClick),this.nodes.text.innerText=this.text,this.nodes.root.appendChild(this.nodes.text)}getElement(){return this.nodes.root}destroy(){this.nodes.root.remove(),this.listeners.destroy()}}class st{constructor(){this.history=[]}push(e){this.history.push(e)}pop(){return this.history.pop()}get currentTitle(){return 0===this.history.length?"":this.history[this.history.length-1].title}get currentItems(){return 0===this.history.length?[]:this.history[this.history.length-1].items}reset(){for(;this.history.length>1;)this.pop()}}class at extends $e{constructor(e){super(e,{[ae.Default]:{hint:{enabled:!1}},[ae.Html]:{hint:{enabled:!1}}}),this.scrollLocker=new nt,this.history=new st,this.isHidden=!0,this.nodes.overlay=X.make("div",[Ue.overlay,Ue.overlayHidden]),this.nodes.popover.insertBefore(this.nodes.overlay,this.nodes.popover.firstChild),this.listeners.on(this.nodes.overlay,"click",(()=>{this.hide()})),this.history.push({items:e.items})}show(){this.nodes.overlay.classList.remove(Ue.overlayHidden),super.show(),this.scrollLocker.lock(),this.isHidden=!1}hide(){this.isHidden||(super.hide(),this.nodes.overlay.classList.add(Ue.overlayHidden),this.scrollLocker.unlock(),this.history.reset(),this.isHidden=!0)}destroy(){super.destroy(),this.scrollLocker.unlock()}showNestedItems(e){this.updateItemsAndHeader(e.children,e.title),this.history.push({title:e.title,items:e.children})}updateItemsAndHeader(e,t){if(null!==this.header&&void 0!==this.header&&(this.header.destroy(),this.header=null),void 0!==t){this.header=new rt({text:t,onBackButtonClick:()=>{this.history.pop(),this.updateItemsAndHeader(this.history.currentItems,this.history.currentTitle)}});const e=this.header.getElement();null!==e&&this.nodes.popoverContainer.insertBefore(e,this.nodes.popoverContainer.firstChild)}this.items.forEach((e=>{var t;return null==(t=e.getElement())?void 0:t.remove()})),this.items=this.buildItems(e),this.items.forEach((e=>{var t;const n=e.getElement();null!==n&&(null==(t=this.nodes.items)||t.appendChild(n))}))}}var lt={exports:{}};!function(e){window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}n.r(t);var r=function(){function e(t){var n=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.commands={},this.keys={},this.name=t.name,this.parseShortcutName(t.name),this.element=t.on,this.callback=t.callback,this.executeShortcut=function(e){n.execute(e)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return i(e,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,".":190}}}]),i(e,[{key:"parseShortcutName",value:function(t){t=t.split("+");for(var n=0;n<t.length;n++){t[n]=t[n].toUpperCase();var o=!1;for(var i in e.supportedCommands)if(e.supportedCommands[i].includes(t[n])){o=this.commands[i]=!0;break}o||(this.keys[t[n]]=!0)}for(var r in e.supportedCommands)this.commands[r]||(this.commands[r]=!1)}},{key:"execute",value:function(t){var n,o={CMD:t.ctrlKey||t.metaKey,SHIFT:t.shiftKey,ALT:t.altKey},i=!0;for(n in this.commands)this.commands[n]!==o[n]&&(i=!1);var r,s=!0;for(r in this.keys)s=s&&t.keyCode===e.keyCodes[r];i&&s&&this.callback(t)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),e}();t.default=r}]).default}(lt);const ct=C(lt.exports);const ut=new class{constructor(){this.registeredShortcuts=new Map}add(e){if(this.findShortcut(e.on,e.name))throw Error(`Shortcut ${e.name} is already registered for ${e.on}. Please remove it before add a new handler.`);const t=new ct({name:e.name,on:e.on,callback:e.handler}),n=this.registeredShortcuts.get(e.on)||[];this.registeredShortcuts.set(e.on,[...n,t])}remove(e,t){const n=this.findShortcut(e,t);if(!n)return;n.remove();const o=this.registeredShortcuts.get(e);this.registeredShortcuts.set(e,o.filter((e=>e!==n)))}findShortcut(e,t){return(this.registeredShortcuts.get(e)||[]).find((({name:e})=>e===t))}};var dt=Object.defineProperty,ht=Object.getOwnPropertyDescriptor,pt=(e,t,n,o)=>{for(var i,r=o>1?void 0:o?ht(t,n):t,s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o?i(t,n,r):i(r))||r);return o&&r&&dt(t,n,r),r};const ft=class e extends Z{constructor({api:t,tools:n,i18nLabels:o}){super(),this.opened=!1,this.listeners=new ee,this.popover=null,this.handleMobileLayoutToggle=()=>{this.destroyPopover(),this.initPopover()},this.onPopoverClose=()=>{this.opened=!1,this.emit("toolbox-closed")},this.api=t,this.tools=n,this.i18nLabels=o,this.enableShortcuts(),this.nodes={toolbox:X.make("div",e.CSS.toolbox)},this.initPopover(),this.nodes.toolbox.setAttribute("data-cy","toolbox"),this.api.events.on(oe,this.handleMobileLayoutToggle)}get isEmpty(){return 0===this.toolsToBeDisplayed.length}static get CSS(){return{toolbox:"ce-toolbox"}}getElement(){return this.nodes.toolbox}hasFocus(){if(null!==this.popover)return"hasFocus"in this.popover?this.popover.hasFocus():void 0}destroy(){var e;super.destroy(),this.nodes&&this.nodes.toolbox&&this.nodes.toolbox.remove(),this.removeAllShortcuts(),null==(e=this.popover)||e.off(He.Closed,this.onPopoverClose),this.listeners.destroy(),this.api.events.off(oe,this.handleMobileLayoutToggle)}toolButtonActivated(e,t){this.insertNewBlock(e,t)}open(){var e;this.isEmpty||(null==(e=this.popover)||e.show(),this.opened=!0,this.emit("toolbox-opened"))}close(){var e;null==(e=this.popover)||e.hide(),this.opened=!1,this.emit("toolbox-closed")}toggle(){this.opened?this.close():this.open()}initPopover(){var e;const t=q()?at:et;this.popover=new t({scopeElement:this.api.ui.nodes.redactor,searchable:!0,messages:{nothingFound:this.i18nLabels.nothingFound,search:this.i18nLabels.filter},items:this.toolboxItemsToBeDisplayed}),this.popover.on(He.Closed,this.onPopoverClose),null==(e=this.nodes.toolbox)||e.append(this.popover.getElement())}destroyPopover(){null!==this.popover&&(this.popover.hide(),this.popover.off(He.Closed,this.onPopoverClose),this.popover.destroy(),this.popover=null),null!==this.nodes.toolbox&&(this.nodes.toolbox.innerHTML="")}get toolsToBeDisplayed(){const e=[];return this.tools.forEach((t=>{t.toolbox&&e.push(t)})),e}get toolboxItemsToBeDisplayed(){const e=(e,t,n=!0)=>({icon:e.icon,title:Q.t(Ce.toolNames,e.title||z(t.name)),name:t.name,onActivate:()=>{this.toolButtonActivated(t.name,e.data)},secondaryLabel:t.shortcut&&n?K(t.shortcut):""});return this.toolsToBeDisplayed.reduce(((t,n)=>(Array.isArray(n.toolbox)?n.toolbox.forEach(((o,i)=>{t.push(e(o,n,0===i))})):void 0!==n.toolbox&&t.push(e(n.toolbox,n)),t)),[])}enableShortcuts(){this.toolsToBeDisplayed.forEach((e=>{const t=e.shortcut;t&&this.enableShortcutForTool(e.name,t)}))}enableShortcutForTool(e,t){ut.add({name:t,on:this.api.ui.nodes.redactor,handler:async t=>{t.preventDefault();const n=this.api.blocks.getCurrentBlockIndex(),o=this.api.blocks.getBlockByIndex(n);if(o)try{const t=await this.api.blocks.convert(o.id,e);return void this.api.caret.setToBlock(t,"end")}catch{}this.insertNewBlock(e)}})}removeAllShortcuts(){this.toolsToBeDisplayed.forEach((e=>{const t=e.shortcut;t&&ut.remove(this.api.ui.nodes.redactor,t)}))}async insertNewBlock(e,t){const n=this.api.blocks.getCurrentBlockIndex(),o=this.api.blocks.getBlockByIndex(n);if(!o)return;const i=o.isEmpty?n:n+1;let r;if(t){const n=await this.api.blocks.composeBlockData(e);r=Object.assign(n,t)}const s=this.api.blocks.insert(e,r,void 0,i,void 0,o.isEmpty);s.call(le.APPEND_CALLBACK),this.api.caret.setToBlock(i),this.emit("toolbox-block-added",{block:s}),this.api.toolbar.close()}};pt([$],ft.prototype,"toolsToBeDisplayed",1),pt([$],ft.prototype,"toolboxItemsToBeDisplayed",1);var gt=(e=>(e[e.Block=0]="Block",e[e.Inline=1]="Inline",e[e.Tune=2]="Tune",e))(gt||{}),vt=(e=>(e.Shortcut="shortcut",e.Toolbox="toolbox",e.EnabledInlineTools="inlineToolbar",e.EnabledBlockTunes="tunes",e.Config="config",e))(vt||{}),mt=(e=>(e.IsEnabledLineBreaks="enableLineBreaks",e.Toolbox="toolbox",e.ConversionConfig="conversionConfig",e.IsReadOnlySupported="isReadOnlySupported",e.PasteConfig="pasteConfig",e))(mt||{}),bt=(e=>(e.IsInline="isInline",e.Title="title",e.IsReadOnlySupported="isReadOnlySupported",e))(bt||{}),yt=(e=>(e.IsTune="isTune",e))(yt||{});class wt{constructor({name:e,constructable:t,config:n,api:o,isDefault:i,isInternal:r=!1,defaultPlaceholder:s}){this.api=o,this.name=e,this.constructable=t,this.config=n,this.isDefault=i,this.isInternal=r,this.defaultPlaceholder=s}get settings(){const e=this.config.config||{};return this.isDefault&&!("placeholder"in e)&&this.defaultPlaceholder&&(e.placeholder=this.defaultPlaceholder),e}reset(){if(M(this.constructable.reset))return this.constructable.reset()}prepare(){if(M(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}get shortcut(){const e=this.constructable.shortcut;return this.config.shortcut||e}get sanitizeConfig(){return this.constructable.sanitize||{}}isInline(){return this.type===gt.Inline}isBlock(){return this.type===gt.Block}isTune(){return this.type===gt.Tune}}var kt={},Ct={},Et={},Tt={},xt={},St={};Object.defineProperty(St,"__esModule",{value:!0}),St.allInputsSelector=function(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map((function(e){return'input[type="'.concat(e,'"]')})).join(", ")},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.allInputsSelector=void 0;var t=St;Object.defineProperty(e,"allInputsSelector",{enumerable:!0,get:function(){return t.allInputsSelector}})}(xt);var Lt={},At={};Object.defineProperty(At,"__esModule",{value:!0}),At.isNativeInput=function(e){return!(!e||!e.tagName)&&["INPUT","TEXTAREA"].includes(e.tagName)},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isNativeInput=void 0;var t=At;Object.defineProperty(e,"isNativeInput",{enumerable:!0,get:function(){return t.isNativeInput}})}(Lt);var Ot={},Pt={};Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.append=function(e,t){Array.isArray(t)?t.forEach((function(t){e.appendChild(t)})):e.appendChild(t)},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.append=void 0;var t=Pt;Object.defineProperty(e,"append",{enumerable:!0,get:function(){return t.append}})}(Ot);var It={},_t={};Object.defineProperty(_t,"__esModule",{value:!0}),_t.blockElements=function(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.blockElements=void 0;var t=_t;Object.defineProperty(e,"blockElements",{enumerable:!0,get:function(){return t.blockElements}})}(It);var Nt={},Mt={};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.calculateBaseline=function(e){var t=window.getComputedStyle(e),n=parseFloat(t.fontSize),o=parseFloat(t.lineHeight)||1.2*n,i=parseFloat(t.paddingTop),r=parseFloat(t.borderTopWidth),s=parseFloat(t.marginTop),a=.8*n,l=(o-n)/2,c=s+r+i+l+a;return c},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.calculateBaseline=void 0;var t=Mt;Object.defineProperty(e,"calculateBaseline",{enumerable:!0,get:function(){return t.calculateBaseline}})}(Nt);var Bt={},jt={},Rt={},Dt={};Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.isContentEditable=function(e){return"true"===e.contentEditable},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isContentEditable=void 0;var t=Dt;Object.defineProperty(e,"isContentEditable",{enumerable:!0,get:function(){return t.isContentEditable}})}(Rt),Object.defineProperty(jt,"__esModule",{value:!0}),jt.canSetCaret=function(e){var t=!0;if((0,Ht.isNativeInput)(e))switch(e.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":t=!1}else t=(0,Ft.isContentEditable)(e);return t};var Ht=Lt,Ft=Rt;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.canSetCaret=void 0;var t=jt;Object.defineProperty(e,"canSetCaret",{enumerable:!0,get:function(){return t.canSetCaret}})}(Bt);var Ut={},Vt={};function zt(){const e={win:!1,mac:!1,x11:!1,linux:!1},t=Object.keys(e).find((e=>-1!==window.navigator.appVersion.toLowerCase().indexOf(e)));return void 0!==t&&(e[t]=!0),e}function Wt(e){return null!=e&&""!==e&&("object"!=typeof e||Object.keys(e).length>0)}function Kt(e){return Object.prototype.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function $t(e){return"function"===Kt(e)||"asyncfunction"===Kt(e)}function qt(e){return"object"===Kt(e)}const Gt=Object.freeze(Object.defineProperty({__proto__:null,PromiseQueue:class{constructor(){this.completed=Promise.resolve()}add(e){return new Promise(((t,n)=>{this.completed=this.completed.then(e).then(t).catch(n)}))}},beautifyShortcut:function(e){const t=zt();return e=e.replace(/shift/gi,"⇧").replace(/backspace/gi,"⌫").replace(/enter/gi,"⏎").replace(/up/gi,"↑").replace(/left/gi,"→").replace(/down/gi,"↓").replace(/right/gi,"←").replace(/escape/gi,"⎋").replace(/insert/gi,"Ins").replace(/delete/gi,"␡").replace(/\+/gi,"+"),e=t.mac?e.replace(/ctrl|cmd/gi,"⌘").replace(/alt/gi,"⌥"):e.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN")},cacheable:function(e,t,n){const o=void 0!==n.value?"value":"get",i=n[o],r=`#${t}Cache`;if(n[o]=function(...e){return void 0===this[r]&&(this[r]=i.apply(this,e)),this[r]},"get"===o&&n.set){const t=n.set;n.set=function(n){delete e[r],t.apply(this,n)}}return n},capitalize:function(e){return e[0].toUpperCase()+e.slice(1)},copyTextToClipboard:function(e){const t=document.createElement("div");t.style.position="absolute",t.style.left="-999px",t.style.bottom="-999px",t.innerHTML=e,document.body.appendChild(t);const n=window.getSelection(),o=document.createRange();if(o.selectNode(t),null===n)throw new Error("Cannot copy text to clipboard");n.removeAllRanges(),n.addRange(o),document.execCommand("copy"),document.body.removeChild(t)},debounce:function(e,t,n){let o;return(...i)=>{const r=this,s=!0===n&&void 0!==o;window.clearTimeout(o),o=window.setTimeout((()=>{o=void 0,!0!==n&&e.apply(r,i)}),t),s&&e.apply(r,i)}},deepMerge:function e(t,...n){if(!n.length)return t;const o=n.shift();if(qt(t)&&qt(o))for(const n in o)qt(o[n])?(void 0===t[n]&&Object.assign(t,{[n]:{}}),e(t[n],o[n])):Object.assign(t,{[n]:o[n]});return e(t,...n)},deprecationAssert:function(e,t,n){const o=`«${t}» is deprecated and will be removed in the next major release. Please use the «${n}» instead.`;e&&console.warn(o)},getUserOS:zt,getValidUrl:function(e){try{return new URL(e).href}catch{}return"//"===e.substring(0,2)?window.location.protocol+e:window.location.origin+e},isBoolean:function(e){return"boolean"===Kt(e)},isClass:function(e){return $t(e)&&/^\s*class\s+/.test(e.toString())},isEmpty:function(e){return!Wt(e)},isFunction:$t,isIosDevice:()=>typeof window<"u"&&null!==window.navigator&&Wt(window.navigator.platform)&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),isNumber:function(e){return"number"===Kt(e)},isObject:qt,isPrintableKey:function(e){return e>47&&e<58||32===e||13===e||229===e||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223},isPromise:function(e){return Promise.resolve(e)===e},isString:function(e){return"string"===Kt(e)},isUndefined:function(e){return"undefined"===Kt(e)},keyCodes:{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,SLASH:191},mouseButtons:{LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4},notEmpty:Wt,throttle:function(e,t,n=void 0){let o,i,r,s=null,a=0;n||(n={});const l=function(){a=!1===n.leading?0:Date.now(),s=null,r=e.apply(o,i),null===s&&(o=i=null)};return function(){const c=Date.now();!a&&!1===n.leading&&(a=c);const u=t-(c-a);return o=this,i=arguments,u<=0||u>t?(s&&(clearTimeout(s),s=null),a=c,r=e.apply(o,i),null===s&&(o=i=null)):!s&&!1!==n.trailing&&(s=setTimeout(l,u)),r}},typeOf:Kt},Symbol.toStringTag,{value:"Module"})),Xt=E(Gt);Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.containsOnlyInlineElements=function(e){var t;(0,Yt.isString)(e)?(t=document.createElement("div"),t.innerHTML=e):t=e;var n=function(e){return!(0,Jt.blockElements)().includes(e.tagName.toLowerCase())&&Array.from(e.children).every(n)};return Array.from(t.children).every(n)};var Yt=Xt,Jt=It;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.containsOnlyInlineElements=void 0;var t=Vt;Object.defineProperty(e,"containsOnlyInlineElements",{enumerable:!0,get:function(){return t.containsOnlyInlineElements}})}(Ut);var Qt={},Zt={},en={},tn={};Object.defineProperty(tn,"__esModule",{value:!0}),tn.make=function(e,t,n){var o;void 0===t&&(t=null),void 0===n&&(n={});var i=document.createElement(e);if(Array.isArray(t)){var r=t.filter((function(e){return void 0!==e}));(o=i.classList).add.apply(o,r)}else null!==t&&i.classList.add(t);for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s]);return i},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.make=void 0;var t=tn;Object.defineProperty(e,"make",{enumerable:!0,get:function(){return t.make}})}(en),Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.fragmentToString=function(e){var t=(0,nn.make)("div");return t.appendChild(e),t.innerHTML};var nn=en;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fragmentToString=void 0;var t=Zt;Object.defineProperty(e,"fragmentToString",{enumerable:!0,get:function(){return t.fragmentToString}})}(Qt);var on={},rn={};Object.defineProperty(rn,"__esModule",{value:!0}),rn.getContentLength=function(e){var t,n;return(0,sn.isNativeInput)(e)?e.value.length:e.nodeType===Node.TEXT_NODE?e.length:null!==(n=null===(t=e.textContent)||void 0===t?void 0:t.length)&&void 0!==n?n:0};var sn=Lt;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getContentLength=void 0;var t=rn;Object.defineProperty(e,"getContentLength",{enumerable:!0,get:function(){return t.getContentLength}})}(on);var an={},ln={},cn=k&&k.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,i=0,r=t.length;i<r;i++)(o||!(i in t))&&(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(ln,"__esModule",{value:!0}),ln.getDeepestBlockElements=function e(t){return(0,un.containsOnlyInlineElements)(t)?[t]:Array.from(t.children).reduce((function(t,n){return cn(cn([],t,!0),e(n),!0)}),[])};var un=Ut;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getDeepestBlockElements=void 0;var t=ln;Object.defineProperty(e,"getDeepestBlockElements",{enumerable:!0,get:function(){return t.getDeepestBlockElements}})}(an);var dn={},hn={},pn={},fn={};Object.defineProperty(fn,"__esModule",{value:!0}),fn.isLineBreakTag=function(e){return["BR","WBR"].includes(e.tagName)},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isLineBreakTag=void 0;var t=fn;Object.defineProperty(e,"isLineBreakTag",{enumerable:!0,get:function(){return t.isLineBreakTag}})}(pn);var gn={},vn={};Object.defineProperty(vn,"__esModule",{value:!0}),vn.isSingleTag=function(e){return["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(e.tagName)},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isSingleTag=void 0;var t=vn;Object.defineProperty(e,"isSingleTag",{enumerable:!0,get:function(){return t.isSingleTag}})}(gn),Object.defineProperty(hn,"__esModule",{value:!0}),hn.getDeepestNode=function e(t,n){void 0===n&&(n=!1);var o=n?"lastChild":"firstChild",i=n?"previousSibling":"nextSibling";if(t.nodeType===Node.ELEMENT_NODE&&t[o]){var r=t[o];if((0,yn.isSingleTag)(r)&&!(0,mn.isNativeInput)(r)&&!(0,bn.isLineBreakTag)(r))if(r[i])r=r[i];else{if(null===r.parentNode||!r.parentNode[i])return r.parentNode;r=r.parentNode[i]}return e(r,n)}return t};var mn=Lt,bn=pn,yn=gn;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getDeepestNode=void 0;var t=hn;Object.defineProperty(e,"getDeepestNode",{enumerable:!0,get:function(){return t.getDeepestNode}})}(dn);var wn={},kn={},Cn=k&&k.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,i=0,r=t.length;i<r;i++)(o||!(i in t))&&(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(kn,"__esModule",{value:!0}),kn.findAllInputs=function(e){return Array.from(e.querySelectorAll((0,xn.allInputsSelector)())).reduce((function(e,t){return(0,Sn.isNativeInput)(t)||(0,En.containsOnlyInlineElements)(t)?Cn(Cn([],e,!0),[t],!1):Cn(Cn([],e,!0),(0,Tn.getDeepestBlockElements)(t),!0)}),[])};var En=Ut,Tn=an,xn=xt,Sn=Lt;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.findAllInputs=void 0;var t=kn;Object.defineProperty(e,"findAllInputs",{enumerable:!0,get:function(){return t.findAllInputs}})}(wn);var Ln={},An={};Object.defineProperty(An,"__esModule",{value:!0}),An.isCollapsedWhitespaces=function(e){return!/[^\t\n\r ]/.test(e)},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isCollapsedWhitespaces=void 0;var t=An;Object.defineProperty(e,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return t.isCollapsedWhitespaces}})}(Ln);var On={},Pn={};Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.isElement=function(e){return!(0,In.isNumber)(e)&&(!!e&&!!e.nodeType&&e.nodeType===Node.ELEMENT_NODE)};var In=Xt;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isElement=void 0;var t=Pn;Object.defineProperty(e,"isElement",{enumerable:!0,get:function(){return t.isElement}})}(On);var _n={},Nn={},Mn={},Bn={};Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.isLeaf=function(e){return null!==e&&0===e.childNodes.length},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isLeaf=void 0;var t=Bn;Object.defineProperty(e,"isLeaf",{enumerable:!0,get:function(){return t.isLeaf}})}(Mn);var jn={},Rn={};Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.isNodeEmpty=function(e,t){var n="";return!((0,Un.isSingleTag)(e)&&!(0,Dn.isLineBreakTag)(e))&&((0,Hn.isElement)(e)&&(0,Fn.isNativeInput)(e)?n=e.value:null!==e.textContent&&(n=e.textContent.replace("​","")),void 0!==t&&(n=n.replace(new RegExp(t,"g"),"")),0===n.trim().length)};var Dn=pn,Hn=On,Fn=Lt,Un=gn;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeEmpty=void 0;var t=Rn;Object.defineProperty(e,"isNodeEmpty",{enumerable:!0,get:function(){return t.isNodeEmpty}})}(jn),Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.isEmpty=function(e,t){e.normalize();for(var n=[e];n.length>0;){var o=n.shift();if(o){if(e=o,(0,Vn.isLeaf)(e)&&!(0,zn.isNodeEmpty)(e,t))return!1;n.push.apply(n,Array.from(e.childNodes))}}return!0};var Vn=Mn,zn=jn;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isEmpty=void 0;var t=Nn;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return t.isEmpty}})}(_n);var Wn={},Kn={};Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.isFragment=function(e){return!(0,$n.isNumber)(e)&&(!!e&&!!e.nodeType&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)};var $n=Xt;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isFragment=void 0;var t=Kn;Object.defineProperty(e,"isFragment",{enumerable:!0,get:function(){return t.isFragment}})}(Wn);var qn={},Gn={};Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.isHTMLString=function(e){var t=(0,Xn.make)("div");return t.innerHTML=e,t.childElementCount>0};var Xn=en;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isHTMLString=void 0;var t=Gn;Object.defineProperty(e,"isHTMLString",{enumerable:!0,get:function(){return t.isHTMLString}})}(qn);var Yn={},Jn={};Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.offset=function(e){var t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop,i=t.top+o,r=t.left+n;return{top:i,left:r,bottom:i+t.height,right:r+t.width}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.offset=void 0;var t=Jn;Object.defineProperty(e,"offset",{enumerable:!0,get:function(){return t.offset}})}(Yn);var Qn={},Zn={};Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.prepend=function(e,t){Array.isArray(t)?(t=t.reverse(),t.forEach((function(t){return e.prepend(t)}))):e.prepend(t)},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.prepend=void 0;var t=Zn;Object.defineProperty(e,"prepend",{enumerable:!0,get:function(){return t.prepend}})}(Qn),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.prepend=e.offset=e.make=e.isLineBreakTag=e.isSingleTag=e.isNodeEmpty=e.isLeaf=e.isHTMLString=e.isFragment=e.isEmpty=e.isElement=e.isContentEditable=e.isCollapsedWhitespaces=e.findAllInputs=e.isNativeInput=e.allInputsSelector=e.getDeepestNode=e.getDeepestBlockElements=e.getContentLength=e.fragmentToString=e.containsOnlyInlineElements=e.canSetCaret=e.calculateBaseline=e.blockElements=e.append=void 0;var t=xt;Object.defineProperty(e,"allInputsSelector",{enumerable:!0,get:function(){return t.allInputsSelector}});var n=Lt;Object.defineProperty(e,"isNativeInput",{enumerable:!0,get:function(){return n.isNativeInput}});var o=Ot;Object.defineProperty(e,"append",{enumerable:!0,get:function(){return o.append}});var i=It;Object.defineProperty(e,"blockElements",{enumerable:!0,get:function(){return i.blockElements}});var r=Nt;Object.defineProperty(e,"calculateBaseline",{enumerable:!0,get:function(){return r.calculateBaseline}});var s=Bt;Object.defineProperty(e,"canSetCaret",{enumerable:!0,get:function(){return s.canSetCaret}});var a=Ut;Object.defineProperty(e,"containsOnlyInlineElements",{enumerable:!0,get:function(){return a.containsOnlyInlineElements}});var l=Qt;Object.defineProperty(e,"fragmentToString",{enumerable:!0,get:function(){return l.fragmentToString}});var c=on;Object.defineProperty(e,"getContentLength",{enumerable:!0,get:function(){return c.getContentLength}});var u=an;Object.defineProperty(e,"getDeepestBlockElements",{enumerable:!0,get:function(){return u.getDeepestBlockElements}});var d=dn;Object.defineProperty(e,"getDeepestNode",{enumerable:!0,get:function(){return d.getDeepestNode}});var h=wn;Object.defineProperty(e,"findAllInputs",{enumerable:!0,get:function(){return h.findAllInputs}});var p=Ln;Object.defineProperty(e,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return p.isCollapsedWhitespaces}});var f=Rt;Object.defineProperty(e,"isContentEditable",{enumerable:!0,get:function(){return f.isContentEditable}});var g=On;Object.defineProperty(e,"isElement",{enumerable:!0,get:function(){return g.isElement}});var v=_n;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return v.isEmpty}});var m=Wn;Object.defineProperty(e,"isFragment",{enumerable:!0,get:function(){return m.isFragment}});var b=qn;Object.defineProperty(e,"isHTMLString",{enumerable:!0,get:function(){return b.isHTMLString}});var y=Mn;Object.defineProperty(e,"isLeaf",{enumerable:!0,get:function(){return y.isLeaf}});var w=jn;Object.defineProperty(e,"isNodeEmpty",{enumerable:!0,get:function(){return w.isNodeEmpty}});var k=pn;Object.defineProperty(e,"isLineBreakTag",{enumerable:!0,get:function(){return k.isLineBreakTag}});var C=gn;Object.defineProperty(e,"isSingleTag",{enumerable:!0,get:function(){return C.isSingleTag}});var E=en;Object.defineProperty(e,"make",{enumerable:!0,get:function(){return E.make}});var T=Yn;Object.defineProperty(e,"offset",{enumerable:!0,get:function(){return T.offset}});var x=Qn;Object.defineProperty(e,"prepend",{enumerable:!0,get:function(){return x.prepend}})}(Tt);var eo={};Object.defineProperty(eo,"__esModule",{value:!0}),eo.getContenteditableSlice=function(e,t,n,o,i){var r;void 0===i&&(i=!1);var s=document.createRange();if("left"===o?(s.setStart(e,0),s.setEnd(t,n)):(s.setStart(t,n),s.setEnd(e,e.childNodes.length)),!0===i){var a=s.extractContents();return(0,to.fragmentToString)(a)}var l=s.cloneContents(),c=document.createElement("div");c.appendChild(l);var u=null!==(r=c.textContent)&&void 0!==r?r:"";return u};var to=Tt;Object.defineProperty(Et,"__esModule",{value:!0}),Et.checkContenteditableSliceForEmptiness=function(e,t,n,o){var i=(0,oo.getContenteditableSlice)(e,t,n,o);return(0,no.isCollapsedWhitespaces)(i)};var no=Tt,oo=eo;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkContenteditableSliceForEmptiness=void 0;var t=Et;Object.defineProperty(e,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return t.checkContenteditableSliceForEmptiness}})}(Ct);var io={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getContenteditableSlice=void 0;var t=eo;Object.defineProperty(e,"getContenteditableSlice",{enumerable:!0,get:function(){return t.getContenteditableSlice}})}(io);var ro={},so={};Object.defineProperty(so,"__esModule",{value:!0}),so.focus=function(e,t){var n,o;if(void 0===t&&(t=!0),(0,ao.isNativeInput)(e)){e.focus();var i=t?0:e.value.length;e.setSelectionRange(i,i)}else{var r=document.createRange(),s=window.getSelection();if(!s)return;var a=function(e){var t=document.createTextNode("");e.appendChild(t),r.setStart(t,0),r.setEnd(t,0)},l=function(e){return null!=e},c=e.childNodes,u=t?c[0]:c[c.length-1];if(l(u)){for(;l(u)&&u.nodeType!==Node.TEXT_NODE;)u=t?u.firstChild:u.lastChild;if(l(u)&&u.nodeType===Node.TEXT_NODE){var d=null!==(o=null===(n=u.textContent)||void 0===n?void 0:n.length)&&void 0!==o?o:0;i=t?0:d;r.setStart(u,i),r.setEnd(u,i)}else a(e)}else a(e);s.removeAllRanges(),s.addRange(r)}};var ao=Tt;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.focus=void 0;var t=so;Object.defineProperty(e,"focus",{enumerable:!0,get:function(){return t.focus}})}(ro);var lo={},co={};Object.defineProperty(co,"__esModule",{value:!0}),co.getCaretNodeAndOffset=function(){var e=window.getSelection();if(null===e)return[null,0];var t=e.focusNode,n=e.focusOffset;return null===t?[null,0]:(t.nodeType!==Node.TEXT_NODE&&t.childNodes.length>0&&(void 0!==t.childNodes[n]?(t=t.childNodes[n],n=0):(t=t.childNodes[n-1],null!==t.textContent&&(n=t.textContent.length))),[t,n])},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getCaretNodeAndOffset=void 0;var t=co;Object.defineProperty(e,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return t.getCaretNodeAndOffset}})}(lo);var uo={},ho={};Object.defineProperty(ho,"__esModule",{value:!0}),ho.getRange=function(){var e=window.getSelection();return e&&e.rangeCount?e.getRangeAt(0):null},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getRange=void 0;var t=ho;Object.defineProperty(e,"getRange",{enumerable:!0,get:function(){return t.getRange}})}(uo);var po={},fo={};Object.defineProperty(fo,"__esModule",{value:!0}),fo.isCaretAtEndOfInput=function(e){var t=(0,go.getDeepestNode)(e,!0);if(null===t)return!0;if((0,go.isNativeInput)(t))return t.selectionEnd===t.value.length;var n=(0,vo.getCaretNodeAndOffset)(),o=n[0],i=n[1];return null!==o&&(0,mo.checkContenteditableSliceForEmptiness)(e,o,i,"right")};var go=Tt,vo=lo,mo=Ct;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isCaretAtEndOfInput=void 0;var t=fo;Object.defineProperty(e,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return t.isCaretAtEndOfInput}})}(po);var bo={},yo={};Object.defineProperty(yo,"__esModule",{value:!0}),yo.isCaretAtStartOfInput=function(e){var t=(0,wo.getDeepestNode)(e);if(null===t||(0,wo.isEmpty)(e))return!0;if((0,wo.isNativeInput)(t))return 0===t.selectionEnd;if((0,wo.isEmpty)(e))return!0;var n=(0,ko.getCaretNodeAndOffset)(),o=n[0],i=n[1];return null!==o&&(0,Co.checkContenteditableSliceForEmptiness)(e,o,i,"left")};var wo=Tt,ko=co,Co=Et;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isCaretAtStartOfInput=void 0;var t=yo;Object.defineProperty(e,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return t.isCaretAtStartOfInput}})}(bo);var Eo={},To={};Object.defineProperty(To,"__esModule",{value:!0}),To.save=function(){var e=(0,So.getRange)(),t=(0,xo.make)("span");if(t.id="cursor",t.hidden=!0,e)return e.insertNode(t),function(){var n=window.getSelection();n&&(e.setStartAfter(t),e.setEndAfter(t),n.removeAllRanges(),n.addRange(e),setTimeout((function(){t.remove()}),150))}};var xo=Tt,So=ho;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.save=void 0;var t=To;Object.defineProperty(e,"save",{enumerable:!0,get:function(){return t.save}})}(Eo),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.save=e.isCaretAtStartOfInput=e.isCaretAtEndOfInput=e.getRange=e.getCaretNodeAndOffset=e.focus=e.getContenteditableSlice=e.checkContenteditableSliceForEmptiness=void 0;var t=Ct;Object.defineProperty(e,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return t.checkContenteditableSliceForEmptiness}});var n=io;Object.defineProperty(e,"getContenteditableSlice",{enumerable:!0,get:function(){return n.getContenteditableSlice}});var o=ro;Object.defineProperty(e,"focus",{enumerable:!0,get:function(){return o.focus}});var i=lo;Object.defineProperty(e,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return i.getCaretNodeAndOffset}});var r=uo;Object.defineProperty(e,"getRange",{enumerable:!0,get:function(){return r.getRange}});var s=po;Object.defineProperty(e,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return s.isCaretAtEndOfInput}});var a=bo;Object.defineProperty(e,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return a.isCaretAtStartOfInput}});var l=Eo;Object.defineProperty(e,"save",{enumerable:!0,get:function(){return l.save}})}(kt);const Lo=class e extends te{constructor(){super(...arguments),this.MIME_TYPE="application/x-editor-js",this.toolsTags={},this.tagsByTool={},this.toolsPatterns=[],this.toolsFiles={},this.exceptionList=[],this.processTool=e=>{try{const t=e.create({},{},!1);if(!1===e.pasteConfig)return void this.exceptionList.push(e.name);if(!M(t.onPaste))return;this.getTagsConfig(e),this.getFilesConfig(e),this.getPatternsConfig(e)}catch(t){_(`Paste handling for «${e.name}» Tool hasn't been set up because of the error`,"warn",t)}},this.handlePasteEvent=async e=>{const{BlockManager:t,Toolbar:n}=this.Editor,o=t.setCurrentBlockByChildNode(e.target);!o||this.isNativeBehaviour(e.target)&&!e.clipboardData.types.includes("Files")||o&&this.exceptionList.includes(o.name)||(e.preventDefault(),this.processDataTransfer(e.clipboardData),n.close())}}async prepare(){this.processTools()}toggleReadOnly(e){e?this.unsetCallback():this.setCallback()}async processDataTransfer(e,t=!1){const{Tools:n}=this.Editor,o=e.types;if((o.includes?o.includes("Files"):o.contains("Files"))&&!H(this.toolsFiles))return void await this.processFiles(e.files);const i=e.getData(this.MIME_TYPE),r=e.getData("text/plain");let s=e.getData("text/html");if(i)try{return void this.insertEditorJSData(JSON.parse(i))}catch{}t&&r.trim()&&s.trim()&&(s="<p>"+(s.trim()?s:r)+"</p>");const a=Object.keys(this.toolsTags).reduce(((e,t)=>(e[t.toLowerCase()]=this.toolsTags[t].sanitizationConfig??{},e)),{}),l=pe(s,Object.assign({},a,n.getAllInlineToolsSanitizeConfig(),{br:{}}));l.trim()&&l.trim()!==r&&X.isHTMLString(l)?await this.processText(l,!0):await this.processText(r)}async processText(e,t=!1){const{Caret:n,BlockManager:o}=this.Editor,i=t?this.processHTML(e):this.processPlain(e);if(!i.length)return;if(1===i.length)return void(i[0].isBlock?this.processSingleBlock(i.pop()):this.processInlinePaste(i.pop()));const r=o.currentBlock&&o.currentBlock.tool.isDefault&&o.currentBlock.isEmpty;i.map((async(e,t)=>this.insertBlock(e,0===t&&r))),o.currentBlock&&n.setToBlock(o.currentBlock,n.positions.END)}setCallback(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}unsetCallback(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}processTools(){const e=this.Editor.Tools.blockTools;Array.from(e.values()).forEach(this.processTool)}collectTagNames(e){return j(e)?[e]:B(e)?Object.keys(e):[]}getTagsConfig(e){if(!1===e.pasteConfig)return;const t=e.pasteConfig.tags||[],n=[];t.forEach((t=>{const o=this.collectTagNames(t);n.push(...o),o.forEach((n=>{if(Object.prototype.hasOwnProperty.call(this.toolsTags,n))return void _(`Paste handler for «${e.name}» Tool on «${n}» tag is skipped because it is already used by «${this.toolsTags[n].tool.name}» Tool.`,"warn");const o=B(t)?t[n]:null;this.toolsTags[n.toUpperCase()]={tool:e,sanitizationConfig:o}}))})),this.tagsByTool[e.name]=n.map((e=>e.toUpperCase()))}getFilesConfig(e){if(!1===e.pasteConfig)return;const{files:t={}}=e.pasteConfig;let{extensions:n,mimeTypes:o}=t;!n&&!o||(n&&!Array.isArray(n)&&(_(`«extensions» property of the onDrop config for «${e.name}» Tool should be an array`),n=[]),o&&!Array.isArray(o)&&(_(`«mimeTypes» property of the onDrop config for «${e.name}» Tool should be an array`),o=[]),o&&(o=o.filter((t=>!!function(e){return/^[-\w]+\/([-+\w]+|\*)$/.test(e)}(t)||(_(`MIME type value «${t}» for the «${e.name}» Tool is not a valid MIME type`,"warn"),!1)))),this.toolsFiles[e.name]={extensions:n||[],mimeTypes:o||[]})}getPatternsConfig(e){!1===e.pasteConfig||!e.pasteConfig.patterns||H(e.pasteConfig.patterns)||Object.entries(e.pasteConfig.patterns).forEach((([t,n])=>{n instanceof RegExp||_(`Pattern ${n} for «${e.name}» Tool is skipped because it should be a Regexp instance.`,"warn"),this.toolsPatterns.push({key:t,pattern:n,tool:e})}))}isNativeBehaviour(e){return X.isNativeInput(e)}async processFiles(e){const{BlockManager:t}=this.Editor;let n;n=await Promise.all(Array.from(e).map((e=>this.processFile(e)))),n=n.filter((e=>!!e));const o=t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty;n.forEach(((e,n)=>{t.paste(e.type,e.event,0===n&&o)}))}async processFile(e){const t=function(e){return e.name.split(".").pop()}(e),n=Object.entries(this.toolsFiles).find((([n,{mimeTypes:o,extensions:i}])=>{const[r,s]=e.type.split("/"),a=i.find((e=>e.toLowerCase()===t.toLowerCase())),l=o.find((e=>{const[t,n]=e.split("/");return t===r&&(n===s||"*"===n)}));return!!a||!!l}));if(!n)return;const[o]=n;return{event:this.composePasteEvent("file",{file:e}),type:o}}processHTML(e){const{Tools:t}=this.Editor,n=X.make("DIV");return n.innerHTML=e,this.getNodes(n).map((e=>{let n,o=t.defaultTool,i=!1;switch(e.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:n=X.make("div"),n.appendChild(e);break;case Node.ELEMENT_NODE:n=e,i=!0,this.toolsTags[n.tagName]&&(o=this.toolsTags[n.tagName].tool)}const{tags:r}=o.pasteConfig||{tags:[]},s=r.reduce(((e,t)=>(this.collectTagNames(t).forEach((n=>{const o=B(t)?t[n]:null;e[n.toLowerCase()]=o||{}})),e)),{}),a=Object.assign({},s,o.baseSanitizeConfig);if("table"===n.tagName.toLowerCase()){const e=pe(n.outerHTML,a);n=X.make("div",void 0,{innerHTML:e}).firstChild}else n.innerHTML=pe(n.innerHTML,a);const l=this.composePasteEvent("tag",{data:n});return{content:n,isBlock:i,tool:o.name,event:l}})).filter((e=>{const t=X.isEmpty(e.content),n=X.isSingleTag(e.content);return!t||n}))}processPlain(e){const{defaultBlock:t}=this.config;if(!e)return[];const n=t;return e.split(/\r?\n/).filter((e=>e.trim())).map((e=>{const t=X.make("div");t.textContent=e;const o=this.composePasteEvent("tag",{data:t});return{content:t,tool:n,isBlock:!1,event:o}}))}async processSingleBlock(e){const{Caret:t,BlockManager:n}=this.Editor,{currentBlock:o}=n;o&&e.tool===o.name&&X.containsOnlyInlineElements(e.content.innerHTML)?t.insertContentAtCaretPosition(e.content.innerHTML):this.insertBlock(e,(null==o?void 0:o.tool.isDefault)&&o.isEmpty)}async processInlinePaste(t){const{BlockManager:n,Caret:o}=this.Editor,{content:i}=t;if(n.currentBlock&&n.currentBlock.tool.isDefault&&i.textContent.length<e.PATTERN_PROCESSING_MAX_LENGTH){const e=await this.processPattern(i.textContent);if(e){const t=n.currentBlock&&n.currentBlock.tool.isDefault&&n.currentBlock.isEmpty,i=n.paste(e.tool,e.event,t);return void o.setToBlock(i,o.positions.END)}}if(n.currentBlock&&n.currentBlock.currentInput){const e=n.currentBlock.tool.baseSanitizeConfig;document.execCommand("insertHTML",!1,pe(i.innerHTML,e))}else this.insertBlock(t)}async processPattern(e){const t=this.toolsPatterns.find((t=>{const n=t.pattern.exec(e);return!!n&&e===n.shift()}));return t?{event:this.composePasteEvent("pattern",{key:t.key,data:e}),tool:t.tool.name}:void 0}insertBlock(e,t=!1){const{BlockManager:n,Caret:o}=this.Editor,{currentBlock:i}=n;let r;if(t&&i&&i.isEmpty)return r=n.paste(e.tool,e.event,!0),void o.setToBlock(r,o.positions.END);r=n.paste(e.tool,e.event),o.setToBlock(r,o.positions.END)}insertEditorJSData(e){const{BlockManager:t,Caret:n,Tools:o}=this.Editor;he(e,(e=>o.blockTools.get(e).sanitizeConfig)).forEach((({tool:e,data:o},i)=>{let r=!1;0===i&&(r=t.currentBlock&&t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty);const s=t.insert({tool:e,data:o,replace:r});n.setToBlock(s,n.positions.END)}))}processElementNode(e,t,n){const o=Object.keys(this.toolsTags),i=e,{tool:r}=this.toolsTags[i.tagName]||{},s=this.tagsByTool[null==r?void 0:r.name]||[],a=o.includes(i.tagName),l=X.blockElements.includes(i.tagName.toLowerCase()),c=Array.from(i.children).some((({tagName:e})=>o.includes(e)&&!s.includes(e))),u=Array.from(i.children).some((({tagName:e})=>X.blockElements.includes(e.toLowerCase())));return l||a||c?a&&!c||l&&!u&&!c?[...t,n,i]:void 0:(n.appendChild(i),[...t,n])}getNodes(e){const t=Array.from(e.childNodes);let n;const o=(e,t)=>{if(X.isEmpty(t)&&!X.isSingleTag(t))return e;const i=e[e.length-1];let r=new DocumentFragment;switch(i&&X.isFragment(i)&&(r=e.pop()),t.nodeType){case Node.ELEMENT_NODE:if(n=this.processElementNode(t,e,r),n)return n;break;case Node.TEXT_NODE:return r.appendChild(t),[...e,r];default:return[...e,r]}return[...e,...Array.from(t.childNodes).reduce(o,[])]};return t.reduce(o,[])}composePasteEvent(e,t){return new CustomEvent(e,{detail:t})}};Lo.PATTERN_PROCESSING_MAX_LENGTH=450;!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".ce-paragraph{line-height:1.6em;outline:none}.ce-block:only-of-type .ce-paragraph[data-placeholder-active]:empty:before,.ce-block:only-of-type .ce-paragraph[data-placeholder-active][data-empty=true]:before{content:attr(data-placeholder-active)}.ce-paragraph p:first-of-type{margin-top:0}.ce-paragraph p:last-of-type{margin-bottom:0}")),document.head.appendChild(e)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}}();class Ao{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:e,config:t,api:n,readOnly:o}){this.api=n,this.readOnly=o,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=t.placeholder?t.placeholder:Ao.DEFAULT_PLACEHOLDER,this._data=e??{},this._element=null,this._preserveBlank=t.preserveBlank??!1}onKeyUp(e){if("Backspace"!==e.code&&"Delete"!==e.code||!this._element)return;const{textContent:t}=this._element;""===t&&(this._element.innerHTML="")}drawView(){const e=document.createElement("DIV");return e.classList.add(this._CSS.wrapper,this._CSS.block),e.contentEditable="false",e.dataset.placeholderActive=this.api.i18n.t(this._placeholder),this._data.text&&(e.innerHTML=this._data.text),this.readOnly||(e.contentEditable="true",e.addEventListener("keyup",this.onKeyUp)),e}render(){return this._element=this.drawView(),this._element}merge(e){if(!this._element)return;this._data.text+=e.text;const t=function(e){const t=document.createElement("div");t.innerHTML=e.trim();const n=document.createDocumentFragment();return n.append(...Array.from(t.childNodes)),n}(e.text);this._element.appendChild(t),this._element.normalize()}validate(e){return!(""===e.text.trim()&&!this._preserveBlank)}save(e){return{text:e.innerHTML}}onPaste(e){const t={text:e.detail.data.innerHTML};this._data=t,window.requestAnimationFrame((()=>{this._element&&(this._element.innerHTML=this._data.text||"")}))}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{text:{br:!0}}}static get isReadOnlySupported(){return!0}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>',title:"Text"}}}class Oo{constructor(){this.commandName="bold"}static get sanitize(){return{b:{}}}render(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11"/></svg>',name:"bold",onActivate:()=>{document.execCommand(this.commandName)},isActive:()=>document.queryCommandState(this.commandName)}}get shortcut(){return"CMD+B"}}Oo.isInline=!0,Oo.title="Bold";class Po{constructor(){this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}static get sanitize(){return{i:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13.34 10C12.4223 12.7337 11 17 11 17"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.21 7H14.2"/></svg>',this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+I"}}Po.isInline=!0,Po.title="Italic";class Io{constructor({api:e}){this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=e.toolbar,this.inlineToolbar=e.inlineToolbar,this.notifier=e.notifier,this.i18n=e.i18n,this.selection=new ne}static get sanitize(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=Se,this.nodes.button}renderActions(){return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.enterKeyHint="done",this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",(e=>{e.keyCode===this.ENTER_KEY&&this.enterPressed(e)})),this.nodes.input}surround(e){if(e){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());const e=this.selection.findParentTag("A");if(e)return this.selection.expandToTag(e),this.unlink(),this.closeActions(),this.checkState(),void this.toolbar.close()}this.toggleActions()}checkState(){const e=this.selection.findParentTag("A");if(e){this.nodes.button.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();const t=e.getAttribute("href");this.nodes.input.value="null"!==t?t:"",this.selection.save()}else this.nodes.button.innerHTML=Se,this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!e}clear(){this.closeActions()}get shortcut(){return"CMD+K"}toggleActions(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}openActions(e=!1){this.nodes.input.classList.add(this.CSS.inputShowed),e&&this.nodes.input.focus(),this.inputOpened=!0}closeActions(e=!0){if(this.selection.isFakeBackgroundEnabled){const e=new ne;e.save(),this.selection.restore(),this.selection.removeFakeBackground(),e.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",e&&this.selection.clearSaved(),this.inputOpened=!1}enterPressed(e){let t=this.nodes.input.value||"";return t.trim()?this.validateURL(t)?(t=this.prepareLink(t),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(t),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.selection.collapseToEnd(),void this.inlineToolbar.close()):(this.notifier.show({message:"Pasted link is not valid.",style:"error"}),void _("Incorrect Link pasted","warn",t)):(this.selection.restore(),this.unlink(),e.preventDefault(),void this.closeActions())}validateURL(e){return!/\s/.test(e)}prepareLink(e){return e=e.trim(),e=this.addProtocol(e)}addProtocol(e){if(/^(\w+):(\/\/)?/.test(e))return e;const t=/^\/[^/\s]/.test(e),n="#"===e.substring(0,1),o=/^\/\/[^/\s]/.test(e);return!t&&!n&&!o&&(e="http://"+e),e}insertLink(e){const t=this.selection.findParentTag("A");t&&this.selection.expandToTag(t),document.execCommand(this.commandLink,!1,e)}unlink(){document.execCommand(this.commandUnlink)}}Io.isInline=!0,Io.title="Link";class _o{constructor({api:e}){this.i18nAPI=e.i18n,this.blocksAPI=e.blocks,this.selectionAPI=e.selection,this.toolsAPI=e.tools,this.caretAPI=e.caret}async render(){const e=ne.get(),t=this.blocksAPI.getBlockByElement(e.anchorNode);if(void 0===t)return[];const n=this.toolsAPI.getBlockTools(),o=await se(t,n);if(0===o.length)return[];const i=o.reduce(((e,n)=>{var o;return null==(o=n.toolbox)||o.forEach((o=>{e.push({icon:o.icon,title:Q.t(Ce.toolNames,o.title),name:n.name,closeOnActivate:!0,onActivate:async()=>{const e=await this.blocksAPI.convert(t.id,n.name,o.data);this.caretAPI.setToBlock(e,"end")}})})),e}),[]),r=await t.getActiveToolboxEntry(),s=void 0!==r?r.icon:Le,a=!q();return{icon:s,name:"convert-to",hint:{title:this.i18nAPI.t("Convert to")},children:{searchable:a,items:i,onOpen:()=>{a&&(this.selectionAPI.setFakeBackground(),this.selectionAPI.save())},onClose:()=>{a&&(this.selectionAPI.restore(),this.selectionAPI.removeFakeBackground())}}}}}_o.isInline=!0;class No{constructor({data:e,api:t}){this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=t,this.title=e.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=e.savedData,this.wrapper=this.make()}render(){return this.wrapper}save(){return this.savedData}make(){const e=X.make("div",this.CSS.wrapper),t=X.make("div",this.CSS.info),n=X.make("div",this.CSS.title,{textContent:this.title}),o=X.make("div",this.CSS.subtitle,{textContent:this.subtitle});return e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>',t.appendChild(n),t.appendChild(o),e.appendChild(t),e}}No.isReadOnlySupported=!0;class Mo extends wt{constructor(){super(...arguments),this.type=gt.Inline}get title(){return this.constructable[bt.Title]}create(){return new this.constructable({api:this.api,config:this.settings})}get isReadOnlySupported(){return this.constructable[bt.IsReadOnlySupported]??!1}}class Bo extends wt{constructor(){super(...arguments),this.type=gt.Tune}create(e,t){return new this.constructable({api:this.api,config:this.settings,block:t,data:e})}}class jo extends Map{get blockTools(){const e=Array.from(this.entries()).filter((([,e])=>e.isBlock()));return new jo(e)}get inlineTools(){const e=Array.from(this.entries()).filter((([,e])=>e.isInline()));return new jo(e)}get blockTunes(){const e=Array.from(this.entries()).filter((([,e])=>e.isTune()));return new jo(e)}get internalTools(){const e=Array.from(this.entries()).filter((([,e])=>e.isInternal));return new jo(e)}get externalTools(){const e=Array.from(this.entries()).filter((([,e])=>!e.isInternal));return new jo(e)}}var Ro=Object.defineProperty,Do=Object.getOwnPropertyDescriptor,Ho=(e,t,n,o)=>{for(var i,r=o>1?void 0:o?Do(t,n):t,s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o?i(t,n,r):i(r))||r);return o&&r&&Ro(t,n,r),r};class Fo extends wt{constructor(){super(...arguments),this.type=gt.Block,this.inlineTools=new jo,this.tunes=new jo}create(e,t,n){return new this.constructable({data:e,block:t,readOnly:n,api:this.api,config:this.settings})}get isReadOnlySupported(){return!0===this.constructable[mt.IsReadOnlySupported]}get isLineBreaksEnabled(){return this.constructable[mt.IsEnabledLineBreaks]}get toolbox(){const e=this.constructable[mt.Toolbox],t=this.config[vt.Toolbox];if(!H(e)&&!1!==t)return t?Array.isArray(e)?Array.isArray(t)?t.map(((t,n)=>{const o=e[n];return o?{...o,...t}:t})):[t]:Array.isArray(t)?t:[{...e,...t}]:Array.isArray(e)?e:[e]}get conversionConfig(){return this.constructable[mt.ConversionConfig]}get enabledInlineTools(){return this.config[vt.EnabledInlineTools]||!1}get enabledBlockTunes(){return this.config[vt.EnabledBlockTunes]}get pasteConfig(){return this.constructable[mt.PasteConfig]??{}}get sanitizeConfig(){const e=super.sanitizeConfig,t=this.baseSanitizeConfig;if(H(e))return t;const n={};for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){const i=e[o];B(i)?n[o]=Object.assign({},t,i):n[o]=i}return n}get baseSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach((t=>Object.assign(e,t.sanitizeConfig))),Array.from(this.tunes.values()).forEach((t=>Object.assign(e,t.sanitizeConfig))),e}}Ho([$],Fo.prototype,"sanitizeConfig",1),Ho([$],Fo.prototype,"baseSanitizeConfig",1);class Uo{constructor(e,t,n){this.api=n,this.config=e,this.editorConfig=t}get(e){const{class:t,isInternal:n=!1,...o}=this.config[e],i=this.getConstructor(t),r=t[yt.IsTune];return new i({name:e,constructable:t,config:o,api:this.api.getMethodsForTool(e,r),isDefault:e===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:n})}getConstructor(e){switch(!0){case e[bt.IsInline]:return Mo;case e[yt.IsTune]:return Bo;default:return Fo}}}class Vo{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',title:this.api.i18n.t("Move down"),onActivate:()=>this.handleClick(),name:"move-down"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),t=this.api.blocks.getBlockByIndex(e+1);if(!t)throw new Error("Unable to move Block down since it is already the last");const n=t.holder,o=n.getBoundingClientRect();let i=Math.abs(window.innerHeight-n.offsetHeight);o.top<window.innerHeight&&(i=window.scrollY+n.offsetHeight),window.scrollTo(0,i),this.api.blocks.move(e+1),this.api.toolbar.toggleBlockSettings(!0)}}Vo.isTune=!0;class zo{constructor({api:e}){this.api=e}render(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',title:this.api.i18n.t("Delete"),name:"delete",confirmation:{title:this.api.i18n.t("Click to delete"),onActivate:()=>this.handleClick()}}}handleClick(){this.api.blocks.delete()}}zo.isTune=!0;class Wo{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15"/></svg>',title:this.api.i18n.t("Move up"),onActivate:()=>this.handleClick(),name:"move-up"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),t=this.api.blocks.getBlockByIndex(e),n=this.api.blocks.getBlockByIndex(e-1);if(0===e||!t||!n)throw new Error("Unable to move Block up since it is already the first");const o=t.holder,i=n.holder,r=o.getBoundingClientRect(),s=i.getBoundingClientRect();let a;a=s.top>0?Math.abs(r.top)-Math.abs(s.top):Math.abs(r.top)+s.height,window.scrollBy(0,-1*a),this.api.blocks.move(e-1),this.api.toolbar.toggleBlockSettings(!0)}}Wo.isTune=!0;var Ko=Object.defineProperty,$o=Object.getOwnPropertyDescriptor;class qo extends te{constructor(){super(...arguments),this.stubTool="stub",this.toolsAvailable=new jo,this.toolsUnavailable=new jo}get available(){return this.toolsAvailable}get unavailable(){return this.toolsUnavailable}get inlineTools(){return this.available.inlineTools}get blockTools(){return this.available.blockTools}get blockTunes(){return this.available.blockTunes}get defaultTool(){return this.blockTools.get(this.config.defaultBlock)}get internal(){return this.available.internalTools}async prepare(){if(this.validateTools(),this.config.tools=W({},this.internalTools,this.config.tools),!Object.prototype.hasOwnProperty.call(this.config,"tools")||0===Object.keys(this.config.tools).length)throw Error("Can't start without tools");const e=this.prepareConfig();this.factory=new Uo(e,this.config,this.Editor.API);const t=this.getListOfPrepareFunctions(e);if(0===t.length)return Promise.resolve();await F(t,(e=>{this.toolPrepareMethodSuccess(e)}),(e=>{this.toolPrepareMethodFallback(e)})),this.prepareBlockTools()}getAllInlineToolsSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach((t=>{Object.assign(e,t.sanitizeConfig)})),e}destroy(){Object.values(this.available).forEach((async e=>{M(e.reset)&&await e.reset()}))}get internalTools(){return{convertTo:{class:_o,isInternal:!0},link:{class:Io,isInternal:!0},bold:{class:Oo,isInternal:!0},italic:{class:Po,isInternal:!0},paragraph:{class:Ao,inlineToolbar:!0,isInternal:!0},stub:{class:No,isInternal:!0},moveUp:{class:Wo,isInternal:!0},delete:{class:zo,isInternal:!0},moveDown:{class:Vo,isInternal:!0}}}toolPrepareMethodSuccess(e){const t=this.factory.get(e.toolName);if(t.isInline()){const e=["render"].filter((e=>!t.create()[e]));if(e.length)return _(`Incorrect Inline Tool: ${t.name}. Some of required methods is not implemented %o`,"warn",e),void this.toolsUnavailable.set(t.name,t)}this.toolsAvailable.set(t.name,t)}toolPrepareMethodFallback(e){this.toolsUnavailable.set(e.toolName,this.factory.get(e.toolName))}getListOfPrepareFunctions(e){const t=[];return Object.entries(e).forEach((([e,n])=>{t.push({function:M(n.class.prepare)?n.class.prepare:()=>{},data:{toolName:e,config:n.config}})})),t}prepareBlockTools(){Array.from(this.blockTools.values()).forEach((e=>{this.assignInlineToolsToBlockTool(e),this.assignBlockTunesToBlockTool(e)}))}assignInlineToolsToBlockTool(e){if(!1!==this.config.inlineToolbar){if(!0===e.enabledInlineTools)return void(e.inlineTools=new jo(Array.isArray(this.config.inlineToolbar)?this.config.inlineToolbar.map((e=>[e,this.inlineTools.get(e)])):Array.from(this.inlineTools.entries())));Array.isArray(e.enabledInlineTools)&&(e.inlineTools=new jo(["convertTo",...e.enabledInlineTools].map((e=>[e,this.inlineTools.get(e)]))))}}assignBlockTunesToBlockTool(e){if(!1!==e.enabledBlockTunes){if(Array.isArray(e.enabledBlockTunes)){const t=new jo(e.enabledBlockTunes.map((e=>[e,this.blockTunes.get(e)])));return void(e.tunes=new jo([...t,...this.blockTunes.internalTools]))}if(Array.isArray(this.config.tunes)){const t=new jo(this.config.tunes.map((e=>[e,this.blockTunes.get(e)])));return void(e.tunes=new jo([...t,...this.blockTunes.internalTools]))}e.tunes=this.blockTunes.internalTools}}validateTools(){for(const e in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,e)){if(e in this.internalTools)return;const t=this.config.tools[e];if(!M(t)&&!M(t.class))throw Error(`Tool «${e}» must be a constructor function or an object with function in the «class» property`)}}prepareConfig(){const e={};for(const t in this.config.tools)B(this.config.tools[t])?e[t]=this.config.tools[t]:e[t]={class:this.config.tools[t]};return e}}((e,t,n,o)=>{for(var i,r=o>1?void 0:o?$o(t,n):t,s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o?i(t,n,r):i(r))||r);o&&r&&Ko(t,n,r)})([$],qo.prototype,"getAllInlineToolsSanitizeConfig",1);function Go(e){return Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Go(e)}function Xo(){Xo=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var r=t&&t.prototype instanceof m?t:m,s=Object.create(r.prototype),a=new P(o||[]);return i(s,"_invoke",{value:S(e,n,a)}),s}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",g="completed",v={};function m(){}function b(){}function y(){}var w={};c(w,s,(function(){return this}));var k=Object.getPrototypeOf,C=k&&k(k(I([])));C&&C!==n&&o.call(C,s)&&(w=C);var E=y.prototype=m.prototype=Object.create(w);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,r,s,a){var l=d(e[i],e,r);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Go(u)&&o.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(u).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,a)}))}a(l.arg)}var r;i(this,"_invoke",{value:function(e,o){function i(){return new t((function(t,i){n(e,o,t,i)}))}return r=r?r.then(i,i):i()}})}function S(t,n,o){var i=h;return function(r,s){if(i===f)throw Error("Generator is already running");if(i===g){if("throw"===r)throw s;return{value:e,done:!0}}for(o.method=r,o.arg=s;;){var a=o.delegate;if(a){var l=L(a,o);if(l){if(l===v)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(i===h)throw i=g,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);i=f;var c=d(t,n,o);if("normal"===c.type){if(i=o.done?g:p,c.arg===v)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(i=g,o.method="throw",o.arg=c.arg)}}}function L(t,n){var o=n.method,i=t.iterator[o];if(i===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,L(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),v;var r=d(i,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,v;var s=r.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function n(){for(;++i<t.length;)if(o.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return r.next=r}}throw new TypeError(Go(t)+" is not iterable")}return b.prototype=y,i(E,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},T(x.prototype),c(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,o,i,r){void 0===r&&(r=Promise);var s=new x(u(e,n,o,i),r);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},T(E),c(E,l,"Generator"),c(E,s,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(o,i){return a.type="throw",a.arg=t,n.next=o,i&&(n.method="next",n.arg=e),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var l=o.call(s,"catchLoc"),c=o.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=e,s.arg=t,r?(this.method="next",this.next=r.finallyLoc,v):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;O(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:I(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),v}},t}function Yo(e,t,n,o,i,r,s){try{var a=e[r](s),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(o,i)}function Jo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r,s,a=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=r.call(n)).done)&&(a.push(o.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Qo(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function Zo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,ti(o.key),o)}}function ei(e,t,n){return(t=ti(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ti(e){var t=function(e,t){if("object"!=Go(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=Go(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Go(t)?t:t+""}var ni=function(){return function(e,t,n){return t&&Zo(e.prototype,t),n&&Zo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var n=t.api;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ei(this,"api",void 0),ei(this,"availableDesign",{bouton:"link-btn",discret:"ninja"}),ei(this,"nodes",{wrapper:null,input:null,selectDesign:null,hideForBot:null,targetBlank:null,button:null,linkButton:null,unlinkButton:null}),ei(this,"inputOpened",!1),ei(this,"anchorTag",null),ei(this,"selection",void 0),this.api=n,this.selection=new m}),[{key:"render",value:function(){return console.log("render"),this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.api.styles.inlineToolButton),this.nodes.button.innerHTML=y,this.nodes.button}},{key:"renderActions",value:function(){var e,t=this;console.log("renderActions",this.nodes.input),this.nodes.input=b.A.element("input",this.api.styles.input,{placeholder:"https://..."}),this.nodes.suggester=b.A.element("div","textSuggester",{style:"display:none"});new w.Local(this.nodes.input,this.nodes.suggester,null!==(e=window.pagesUriList)&&void 0!==e?e:[],{highlight:!0,dispMax:20,dispAllKey:!0}),this.nodes.hideForBot=b.A.switchInput("hideForBot",this.api.i18n.t("Obfusquer")),this.nodes.targetBlank=b.A.switchInput("targetBlank",this.api.i18n.t("Nouvel onglet")),this.nodes.selectDesign=b.A.element("select",this.api.styles.input),b.A.option(this.nodes.selectDesign,"",this.api.i18n.t("Style"),{style:"opacity: 0.5"});for(var n=0,o=Object.entries(this.availableDesign);n<o.length;n++){var i=Jo(o[n],2),r=i[0],s=i[1];b.A.option(this.nodes.selectDesign,s,r)}return this.nodes.wrapper=document.createElement("div"),this.nodes.wrapper.classList.add("link-options-wrapper"),this.nodes.wrapper.append(this.nodes.input,this.nodes.suggester,this.nodes.hideForBot,this.nodes.targetBlank,this.nodes.selectDesign),this.nodes.wrapper.addEventListener("change",(function(e){t.updateLink()})),this.nodes.wrapper.addEventListener("copy",function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var r=e.apply(t,n);function s(e){Yo(r,o,i,s,a,"next",e)}function a(e){Yo(r,o,i,s,a,"throw",e)}s(void 0)}))}}(Xo().mark((function e(n){var o;return Xo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("copy",t.anchorTag),e.next=3,navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([null===(o=t.anchorTag)||void 0===o?void 0:o.outerHTML],{type:"text/html"}),"text/plain":new Blob([t.nodes.input.value],{type:"text/plain"})})]);case 3:n.preventDefault();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.nodes.input.addEventListener("keydown",(function(e){"Enter"===e.key&&(console.log("press ENTER"),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.updateLink(),t.closeActions())})),console.log("/renderActions"),this.nodes.wrapper}},{key:"checkState",value:function(){var e=this;console.log("checkState");var t=this.anchorTag||this.api.selection.findParentTag("A");return t?t.innerText.includes(window.getSelection().toString())?(this.showUnlink(),this.anchorTag=t,this.openActions(),this.updateActionValues(t),setTimeout((function(){return e.nodes.input.focus()}),0),console.log("/checkState"),!0):(this.showUnlink(!0),!1):(this.showUnlink(!1),!1)}},{key:"surround",value:function(e){if(console.log("surround",e,this.anchorTag),e){this.inputOpened&&(this.selection.restore(),this.selection.removeFakeBackground());var t=this.api.selection.findParentTag("A")||this.anchorTag;if(console.log(t,this.inputOpened),t)return this.unlink(t),void this.closeActions();console.log("create A"),this.anchorTag=document.createElement("A"),this.anchorTag.appendChild(e.extractContents()),e.insertNode(this.anchorTag),this.api.selection.expandToTag(this.anchorTag),this.selection.setFakeBackground(),this.selection.save(),this.openActions(!0)}else this.toggleActions()}},{key:"showUnlink",value:function(){var e,t;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])return null===(t=this.nodes.button)||void 0===t||t.classList.add(this.api.styles.inlineToolButtonActive),void(this.nodes.button.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>');this.nodes.button.innerHTML=y,null===(e=this.nodes.button)||void 0===e||e.classList.remove(this.api.styles.inlineToolButtonActive)}},{key:"updateActionValues",value:function(e){if(console.log("updateActionValues"),this.nodes.input){var t=e.getAttribute("href");this.nodes.input.value=t||"";var n=e.getAttribute("rel");this.nodes.hideForBot.querySelector("input").checked=!!n;var o=e.getAttribute("target");this.nodes.targetBlank.querySelector("input").checked=!!o;var i=e.getAttribute("class");this.nodes.selectDesign.value=i||"",console.log("/updateActionValues")}}},{key:"shortcut",get:function(){return console.log("shortcut initialized CMD+K"),"CMD+K"}},{key:"clear",value:function(){console.log("CLEAR"),this.anchorTag&&(this.anchorTag.style=""),this.selection.removeFakeBackground()}},{key:"toggleActions",value:function(){console.log("toggleActions",this.inputOpened),this.inputOpened?this.closeActions():this.openActions(!0)}},{key:"openActions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.log("openActions"),this.nodes.wrapper.style.display="block",this.anchorTag&&(this.api.selection.expandToTag(this.anchorTag),this.api.selection.setFakeBackground(),this.api.selection.save()),e&&this.nodes.input.focus(),this.inputOpened=!0}},{key:"closeActions",value:function(){(console.log("closeActions",this.selection.isFakeBackgroundEnabled),this.selection.isFakeBackgroundEnabled)&&((new m).save(),this.selection.restore(),this.selection.removeFakeBackground(),this.selection.collapseToEnd());(this.nodes.input.value||"").trim()||this.unlink(this.anchorTag),this.inputOpened=!1,this.api.inlineToolbar.close()}},{key:"updateLink",value:function(){var e=this.nodes.input.value.trim()||"";this.anchorTag.setAttribute("href",e);var t=this.nodes.targetBlank.querySelector("input").checked?"_blank":"";t?this.anchorTag.setAttribute("target",t):this.anchorTag.removeAttribute("target");var n=this.nodes.hideForBot.querySelector("input").checked?"obfuscate":"";n?this.anchorTag.setAttribute("rel",n):this.anchorTag.removeAttribute("rel");var o=this.nodes.selectDesign.value||"";return o?this.anchorTag.className=o:this.anchorTag.removeAttribute("class"),this.anchorTag}},{key:"unlink",value:function(e){var t;if(console.log("- unlink",e,this.anchorTag),e){this.api.selection.expandToTag(e);var n=window.getSelection();if(n){var o=n.getRangeAt(0);if(o){var i=o.extractContents();i&&(null===(t=e.parentNode)||void 0===t||t.removeChild(e),o.insertNode(i),n.removeAllRanges(),o.collapse(),n.addRange(o),console.log("removed"))}}}}}],[{key:"isInline",get:function(){return!0}},{key:"sanitize",get:function(){return{a:{href:!0,target:!0,rel:!0,class:!0}}}}])}();ei(ni,"isInline",!0),ei(ni,"title","Link")},9110:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(1601),i=n.n(o),r=n(6314),s=n.n(r)()(i());s.push([e.id,".link-options-wrapper {\n  outline: none;\n  border: 0;\n  border-radius: 0 0 4px 4px;\n  margin: 0;\n  font-size: 13px;\n  padding: 10px;\n  width: 100%;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  font-weight: 500;\n  border-top: 1px solid rgba(201, 201, 204, 0.48);\n}\n\n.ninja {\n  text-decoration: none !important;\n  color: inherit !important;\n  border-bottom: 1px dotted #333;\n}\n\n.link-btn {\n  padding: 6px 12px;\n  margin-bottom: 0;\n  border-radius: 3px;\n  border: 1px solid transparent;\n  cursor: pointer;\n  color: #fff;\n  background-color: #3c8dbc;\n  border-color: #367fa9;\n  outline: none;\n  text-decoration: none !important;\n}\n\n.link-btn:hover {\n  color: #fff !important;\n}\n\n.editor-switch {\n  padding-left: 4px;\n  padding-right: 10px;\n  margin-bottom: 10px;\n  margin-top: 5px;\n}\n\n.editor-switch > input[type='checkbox'] {\n  display: none;\n}\n\n.editor-switch label {\n  font-weight: normal;\n}\n.editor-switch > .label-default {\n  cursor: pointer;\n  height: 0px;\n  position: relative;\n  width: 30px;\n}\n\n.editor-switch > .label-default::before {\n  background: rgb(0, 0, 0);\n  box-shadow: inset 0px 0px 10px rgba(0, 0, 0, 0.5);\n  border-radius: 8px;\n  content: '';\n  height: 12px;\n  margin-top: -5px;\n  position: absolute;\n  opacity: 0.3;\n  transition: all 0.4s ease-in-out;\n  width: 20px;\n}\n.editor-switch > .label-default::after {\n  background: rgb(255, 255, 255);\n  border-radius: 16px;\n  box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.3);\n  content: '';\n  height: 16px;\n  left: -4px;\n  position: absolute;\n  top: -7px;\n  transition: all 0.3s ease-in-out;\n  width: 16px;\n}\n.editor-switch > input[type='checkbox']:checked + .label-default::before {\n  background: inherit;\n  opacity: 0.5;\n}\n.editor-switch > input[type='checkbox']:checked + .label-default::after {\n  background: inherit;\n  left: 10px;\n}\n\n.plugin-option-input {\n  border: 1px solid rgba(201, 201, 204, 0.48);\n  box-shadow: inset 0 1px 2px 0 rgb(35 44 72 / 6%);\n  border-radius: 5px;\n  padding: 5px 8px;\n  margin-bottom: 10px;\n  outline: none;\n  width: 100%;\n  box-sizing: border-box;\n  background: #fff;\n}\n\n.ce-popover__container {\n  min-width: 235px !important;\n}\n",""]);const a=s}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={id:o,exports:{}};return e[o](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0;var o={};n.d(o,{default:()=>E});var i=n(5072),r=n.n(i),s=n(7825),a=n.n(s),l=n(7659),c=n.n(l),u=n(5056),d=n.n(u),h=n(540),p=n.n(h),f=n(1113),g=n.n(f),v=n(5678),m={};m.styleTagTransform=g(),m.setAttributes=d(),m.insert=c().bind(null,"head"),m.domAPI=a(),m.insertStyleElement=p();r()(v.A,m);v.A&&v.A.locals&&v.A.locals;var b=n(462),y=n(8945);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function k(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,C(o.key),o)}}function C(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=w(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w(t)?t:t+""}var E=function(){return e=function e(t){var n=t.api,o=t.data;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=n,this.data=o||{url:"",hideForBot:!0,targetBlank:!1},this._CSS={classWrapper:"cdx-anchor-tune-wrapper",classIcon:"cdx-anchor-tune-icon",classInput:"cdx-anchor-tune-input"},this.nodes={},this.i18n=n.i18n},n=[{key:"isTune",get:function(){return!0}}],(t=[{key:"render",value:function(){var e=document.createElement("div"),t=document.createElement("div");return t.classList.add(this._CSS.classIcon),t.appendChild(y.default.iconSvg("link",12,12)),this.nodes.url=b.A.input(this,["cdx-input-labeled","cdx-input-full"],"<a href=#>image</a>",this.data.url),this.nodes.hideForBot=b.A.switchInput("hideForBot",this.i18n.t("Obfusquer")),this.nodes.targetBlank=b.A.switchInput("targetBlank",this.i18n.t("Nouvel onglet")),e.appendChild(t),e.appendChild(this.nodes.url),e.appendChild(this.nodes.hideForBot),e.appendChild(this.nodes.targetBlank),e}},{key:"save",value:function(){return this.data}}])&&k(e.prototype,t),n&&k(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();return o=o.default})()));